"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[8387],{8387:(P,N,s)=>{s.r(N),s.d(N,{default:()=>ie});var e=s(5879),d=s(6814),h=s(6223),w=s(2296),C=s(3680),D=s(7700),y=s(617),A=s(4516),v=s(1476),Z=s(8525),t=s(5313),a=s(1993),i=s(836),c=s(9397),f=s(2572),m=s(3997),p=s(7921),r=s(4664),x=s(6306),o=s(53),T=s(2787),U=s(5742),E=s(4553),$=s(7457),L=s(2948),O=s(1043);function W(n,u){if(1&n&&(e.TgZ(0,"mat-option",16)(1,"span",17),e._uU(2),e.qZA()()),2&n){const l=u.$implicit;e.Q6J("value",l.value),e.xp6(2),e.Oqu(l.name)}}function S(n,u){if(1&n&&(e.TgZ(0,"mat-option",16)(1,"span",17),e._uU(2),e.qZA()()),2&n){const l=u.$implicit;e.Q6J("value",l.value),e.xp6(2),e.Oqu(l.name)}}function Q(n,u){1&n&&(e.TgZ(0,"th",37),e._uU(1),e.qZA()),2&n&&(e.xp6(1),e.hij(" ","S.No"," "))}function R(n,u){if(1&n&&(e.TgZ(0,"td",38)(1,"span",39),e._uU(2),e.qZA()()),2&n){const l=u.index,_=e.oxw(3);e.xp6(2),e.hij(" ",l+1+_.pageIndex*_.pageSize," ")}}function j(n,u){1&n&&(e.TgZ(0,"th",40),e._uU(1),e.qZA()),2&n&&(e.xp6(1),e.hij(" ","full name"," "))}function M(n,u){if(1&n&&(e.TgZ(0,"td",41),e._uU(1),e.qZA()),2&n){const l=u.$implicit;e.xp6(1),e.hij(" ",null==l||null==l.user_id?null:l.user_id.full_name," ")}}function z(n,u){1&n&&(e.TgZ(0,"th",42),e._uU(1),e.qZA()),2&n&&(e.xp6(1),e.hij(" ","Email / Phone"," "))}function B(n,u){if(1&n){const l=e.EpF();e.TgZ(0,"td",43)(1,"span",44),e.NdJ("click",function(){const b=e.CHM(l).$implicit,I=e.oxw(3);return e.KtG(I.navgtionToUserDetais(null==b||null==b.user_id?null:b.user_id._id))}),e._uU(2),e.qZA(),e.TgZ(3,"span",45),e._uU(4),e.qZA()()}if(2&n){const l=u.$implicit;e.xp6(2),e.hij(" ",null==l||null==l.user_id?null:l.user_id.email,""),e.xp6(2),e.hij(" ",null==l||null==l.user_id?null:l.user_id.phone," ")}}function J(n,u){1&n&&(e.TgZ(0,"th",46),e._uU(1),e.qZA()),2&n&&(e.xp6(1),e.hij(" "," Amount"," "))}function Y(n,u){if(1&n&&(e.TgZ(0,"td",47),e._uU(1),e.ALo(2,"currency"),e.qZA()),2&n){const l=u.$implicit;e.xp6(1),e.hij(" ",e.gM2(2,1,null==l?null:l.amount,"USD",!0,"1.0-2")," ")}}function X(n,u){1&n&&(e.TgZ(0,"th",42),e._uU(1),e.qZA()),2&n&&(e.xp6(1),e.hij(" ","Type"," "))}function F(n,u){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&n){const l=e.oxw().$implicit;e.xp6(1),e.hij(" ",null==l?null:l.type,"")}}function H(n,u){1&n&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&n&&(e.xp6(1),e.hij(" ","New",""))}function K(n,u){if(1&n&&(e.TgZ(0,"td",47),e.YNc(1,F,2,1,"span",14),e.YNc(2,H,2,1,"span",14),e.qZA()),2&n){const l=u.$implicit;e.xp6(1),e.Q6J("ngIf",null==l?null:l.type),e.xp6(1),e.Q6J("ngIf",!(null!=l&&l.type))}}function G(n,u){1&n&&(e.TgZ(0,"th",48),e._uU(1),e.qZA()),2&n&&(e.xp6(1),e.hij(" ","Transaction Date"," "))}function q(n,u){if(1&n&&(e.TgZ(0,"td",41)(1,"span",49),e._uU(2),e.ALo(3,"date"),e.qZA()()),2&n){const l=u.$implicit;e.xp6(2),e.hij(" ",e.xi3(3,1,l.createdAt,"dd/MM/yyyy,hh:mm a")," ")}}function k(n,u){1&n&&e._UZ(0,"tr",50)}function V(n,u){1&n&&e._UZ(0,"tr",51)}function ee(n,u){if(1&n&&(e.TgZ(0,"table",19),e.ynx(1,20),e.YNc(2,Q,2,1,"th",21),e.YNc(3,R,3,1,"td",22),e.BQk(),e.ynx(4,23),e.YNc(5,j,2,1,"th",24),e.YNc(6,M,2,1,"td",25),e.BQk(),e.ynx(7,26),e.YNc(8,z,2,1,"th",27),e.YNc(9,B,5,2,"td",28),e.BQk(),e.ynx(10,29),e.YNc(11,J,2,1,"th",30),e.YNc(12,Y,3,6,"td",31),e.BQk(),e.ynx(13,32),e.YNc(14,X,2,1,"th",27),e.YNc(15,K,3,2,"td",31),e.BQk(),e.ynx(16,33),e.YNc(17,G,2,1,"th",34),e.YNc(18,q,4,4,"td",25),e.BQk(),e.YNc(19,k,1,0,"tr",35),e.YNc(20,V,1,0,"tr",36),e.qZA()),2&n){const l=e.oxw(2);e.Q6J("dataSource",l.users),e.xp6(19),e.Q6J("matHeaderRowDef",l.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",l.displayedColumns)}}function te(n,u){if(1&n&&(e.ynx(0),e.YNc(1,ee,21,3,"table",18),e.BQk()),2&n){const l=e.oxw();e.xp6(1),e.Q6J("ngIf",!l.isLoading)}}function ne(n,u){if(1&n&&(e.ynx(0),e._UZ(1,"app-loading-skeltons",52),e.BQk()),2&n){const l=e.oxw();e.xp6(1),e.Q6J("skeltonType",l.skletonTable)}}function ae(n,u){1&n&&(e.ynx(0),e._UZ(1,"app-empty-state",53),e.BQk()),2&n&&(e.xp6(1),e.Q6J("isSvgImage",!1)("stateTitle","THERE IS NO Items"))}const le=function(n,u){return{"pointer-events-none":n,hidden:u}},se=function(){return[10,20,50,100]},ie=[{path:"",component:(()=>{class n{constructor(){this.pageIndex=0,this.pageSize=10,this.total_recoreds=0,this.users=[],this.skletonTable=L.q.TABLE,this.isLoading=!0,this.type_wallet=[{name:"All",value:""},{name:"Credit",value:"credit"},{name:"Debit",value:"debit"}],this.type_order=[{name:"All",value:""},{name:"Cashback",value:"cashback"},{name:"Order",value:"order"},{name:"Loyalty",value:"loyalty"},{name:"Referral",value:"referral"},{name:"Gift Card - balance card",value:"balance_card"}],this._RouterService=(0,e.f3M)(T.F0),this.destroyRef=(0,e.f3M)(e.ktI),this._UsersService=(0,e.f3M)($.f),this.email_searchInputControl=new h.p4(""),this.for_typeInputControl=new h.p4(""),this.typeInputControl=new h.p4(""),this.displayedColumns=["S_No","full_name","email","Wallet_Amoun","Type","Transaction_Date"]}ngOnInit(){this._UsersService.updatePagination$({pageIndex:0,pageSize:10,length:0}),this._UsersService.all_users_wallet$.pipe((0,a.sL)(this.destroyRef),(0,i.T)(1),(0,c.b)(_=>{console.log("loading data !",_),this.users=_,this.isLoading=!1})).subscribe(),(0,f.a)([this._UsersService.pagination$.pipe((0,c.b)(_=>{console.log("data passed to pagination",_),this.pageIndex=_.pageIndex,this.pageSize=_.pageSize}),(0,m.x)((_,g)=>_.pageIndex===g.pageIndex&&_.pageSize===g.pageSize)),this.typeInputControl.valueChanges.pipe((0,p.O)(""),(0,m.x)()),this.for_typeInputControl.valueChanges.pipe((0,p.O)(""),(0,m.x)()),this.email_searchInputControl.valueChanges.pipe((0,p.O)(""),(0,m.x)(),(0,c.b)(()=>{this.for_typeInputControl.setValue(""),this.typeInputControl.setValue("")}))]).pipe((0,a.sL)(this.destroyRef),(0,r.w)(([_,g,b,I])=>(this.isLoading=!0,this._UsersService.getAll_users_wallet(_?.pageIndex,_?.pageSize,g,b,I))),(0,x.K)(_=>(this.isLoading=!1,_))).subscribe(),this._UsersService.pagination$.pipe((0,a.sL)(this.destroyRef),(0,c.b)(_=>{this._paginator.length=_.length,this.total_recoreds=_.length,this._paginator.pageIndex=_.pageIndex,this._paginator.pageSize=_.pageSize})).subscribe()}pageChange(l){this._UsersService.updatePagination$(l)}navgtionToUserDetais(l){this._RouterService.navigate(["./users/user-management/user-details"],{queryParams:{user_id:l}})}static#e=this.\u0275fac=function(_){return new(_||n)};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-user-wallet"]],viewQuery:function(_,g){if(1&_&&e.Gf(v.NW,7),2&_){let b;e.iGM(b=e.CRH())&&(g._paginator=b.first)}},standalone:!0,features:[e.jDz],decls:30,vars:17,consts:[[1,"relative","inset-0","min-w-0","w-full"],[1,"flex-auto","pt-9","pb-10","md:px-4","lg:px-6","min-w-max"],[1,"h-full","max-h-max","min-w-max"],[1,"rounded-lg","flex","flex-col","bg-card","h-full","w-full","min-w-max"],[1,"w-full","px-6","pt-10","pb-4","border-b"],[1,"text-2xl","font-semibold"],[1,"relative","flex","flex-row","sm:flex-row","flex-0","sm:items-end","sm:justify-between","py-4","px-6","md:px-2","border-b","w-full"],[1,"flex","w-full","flex-row","sm:flex-row","sm:items-end","sm:justify-between","gap-x-4","px-5"],[1,"fuse-mat-no-subscript","w-full"],["placeholder","select Type",3,"formControl"],[3,"value",4,"ngFor","ngForOf"],["matInput","","type","email","placeholder","Search by email",3,"formControl","autocomplete"],[1,"flex","flex-col","flex-auto","min-w-max"],[1,"flex","flex-col","w-full","h-full","max-h-max","min-w-max","border"],[4,"ngIf"],[1,"border",3,"ngClass","pageSizeOptions","showFirstLastButtons","page"],[3,"value"],[1,"ml-3"],["mat-table","","class","custom-table max-w-full",3,"dataSource",4,"ngIf"],["mat-table","",1,"custom-table","max-w-full",3,"dataSource"],["matColumnDef","S_No"],["mat-header-cell","","class","whitespace-nowrap px-1",4,"matHeaderCellDef"],["class","whitespace-nowrap","mat-cell","",4,"matCellDef"],["matColumnDef","full_name"],["mat-header-cell","","class","whitespace-nowrap px-3",4,"matHeaderCellDef"],["mat-cell","","class","whitespace-nowrap px-2",4,"matCellDef"],["matColumnDef","email"],["mat-header-cell","","class","px-3 whitespace-nowrap",4,"matHeaderCellDef"],["mat-cell","","class","whitespace-nowrap px-1",4,"matCellDef"],["matColumnDef","Wallet_Amoun"],["mat-header-cell","","class","px-2 whitespace-nowrap",4,"matHeaderCellDef"],["mat-cell","","class","whitespace-nowrap px-3",4,"matCellDef"],["matColumnDef","Type"],["matColumnDef","Transaction_Date"],["mat-header-cell","","class","whitespace-nowrap px-2",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["class","hover:bg-hover cursor-pointer","mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell","",1,"whitespace-nowrap","px-1"],["mat-cell","",1,"whitespace-nowrap"],[1,"font-medium","text-sm","text-secondary","whitespace-nowrap"],["mat-header-cell","",1,"whitespace-nowrap","px-3"],["mat-cell","",1,"whitespace-nowrap","px-2"],["mat-header-cell","",1,"px-3","whitespace-nowrap"],["mat-cell","",1,"whitespace-nowrap","px-1"],[1,"text-blue-500",3,"click"],[1,"block"],["mat-header-cell","",1,"px-2","whitespace-nowrap"],["mat-cell","",1,"whitespace-nowrap","px-3"],["mat-header-cell","",1,"whitespace-nowrap","px-2"],[1,""],["mat-header-row",""],["mat-row","",1,"hover:bg-hover","cursor-pointer"],[3,"skeltonType"],["stateIcon","heroicons_solid:information-circle",1,"bg-card","rounded-lg",3,"isSvgImage","stateTitle"]],template:function(_,g){1&_&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h2",5),e._uU(6),e.qZA()(),e.TgZ(7,"div",6)(8,"div",7)(9,"mat-form-field",8)(10,"mat-label"),e._uU(11," Type "),e.qZA(),e.TgZ(12,"mat-select",9),e.YNc(13,W,3,2,"mat-option",10),e.qZA()(),e.TgZ(14,"mat-form-field",8)(15,"mat-label"),e._uU(16," type order "),e.qZA(),e.TgZ(17,"mat-select",9),e.YNc(18,S,3,2,"mat-option",10),e.qZA()(),e.TgZ(19,"mat-form-field",8)(20,"mat-label"),e._uU(21,"Saerch by Email"),e.qZA(),e._UZ(22,"input",11),e.qZA()()(),e.TgZ(23,"div",12)(24,"div",13),e.YNc(25,te,2,1,"ng-container",14),e.YNc(26,ne,2,1,"ng-container",14),e.ynx(27),e.TgZ(28,"mat-paginator",15),e.NdJ("page",function(I){return g.pageChange(I)}),e.qZA(),e.BQk(),e.YNc(29,ae,2,2,"ng-container",14),e.qZA()()()()()()),2&_&&(e.xp6(6),e.hij(" Total Records : ",g.total_recoreds," "),e.xp6(6),e.Q6J("formControl",g.typeInputControl),e.xp6(1),e.Q6J("ngForOf",g.type_wallet),e.xp6(4),e.Q6J("formControl",g.for_typeInputControl),e.xp6(1),e.Q6J("ngForOf",g.type_order),e.xp6(4),e.Q6J("formControl",g.email_searchInputControl)("autocomplete","true"),e.xp6(3),e.Q6J("ngIf",g.users.length),e.xp6(1),e.Q6J("ngIf",g.isLoading),e.xp6(2),e.Q6J("ngClass",e.WLB(13,le,g.isLoading,!g.users.length))("pageSizeOptions",e.DdM(16,se))("showFirstLastButtons",!0),e.xp6(1),e.Q6J("ngIf",!g.users.length&&!g.isLoading))},dependencies:[d.ax,d.mk,d.O5,d.uU,d.H9,v.TU,v.NW,t.p0,t.BZ,t.fO,t.as,t.w1,t.Dz,t.nj,t.ge,t.ev,t.XQ,t.Gk,y.Ps,w.ot,E.W,A.c,A.Nt,O.KE,O.hX,h.UX,h.Fj,h.JJ,h.oH,Z.LD,Z.gD,C.ey,o.vi,U.s,C.si,D.Is],styles:["app-user-wallet[_ngcontent-%COMP%]{display:flex;height:-moz-fit-content;height:fit-content;min-height:100vh;flex-direction:column}"]})}return n})()}]},7457:(P,N,s)=>{s.d(N,{f:()=>A});var e=s(9862),d=s(3074),h=s(553),w=s(5619),C=s(7398),D=s(5592),y=s(5879);let A=(()=>{class v{get users$(){return this._users.asObservable()}get gest_users$(){return this._guest_users.asObservable()}get all_newsLetters$(){return this._all_newsLetters.asObservable()}get user$(){return this._user.asObservable()}get _users_batch_refill_requests$(){return this._users_batch_refill_requests.asObservable()}get user_document$(){return this._users_document.asObservable()}get all_wishlist$(){return this._all_wishlist.asObservable()}get all_users_wallet$(){return this._all_users_wallet.asObservable()}constructor(t){this._httpClient=t,this._users=new w.X(null),this._guest_users=new w.X(null),this._all_newsLetters=new w.X(null),this._users_batch_refill_requests=new w.X(null),this._user=new w.X(null),this._users_document=new w.X(null),this._all_users_wallet=new w.X(null),this._all_wishlist=new w.X(null),this._pagination=new w.X({pageIndex:0,pageSize:10,length:0})}get pagination$(){return this._pagination.asObservable()}updatePagination$(t){this._pagination.next(t)}getUsers(t=0,a=10,i,c,f,m,p){let r=t;-1!=t&&(r=t+1);let x=h.N.API_ENDPOINT+d.b.users.get_users,o=(new e.LE).set("page",r).set("limit",a);return console.log("email_validate",f),c&&(o=o.append("search",c)),p&&(o=o.append("phone",p)),m&&(o=o.append("email",m)),"boolean"==typeof f&&(o=o.append("verified",f)),i&&(o=o.append("status",i)),this._httpClient.get(`${x}`,{params:o}).pipe((0,C.U)(T=>{if(T.success){const U=T.data;return this._users.next(U),this._pagination.next({length:T.page_info.count,pageIndex:t,pageSize:a}),U}}))}getUserbyId(t){return this._httpClient.get(`${h.N.API_ENDPOINT+d.b.users.get_user}/${t}`).pipe((0,C.U)(i=>{if(i.success){const c=i.data;return this._user.next(c),c}}))}getUsers_documents(t=0,a=10,i,c){let f=t+1,m=h.N.API_ENDPOINT+d.b.users.users_document,p=(new e.LE).set("page",f).set("limit",a);return c&&(p=p.append("email",c)),i&&(p=p.append("status",i)),this._httpClient.get(`${m}`,{params:p}).pipe((0,C.U)(r=>{if(r.success){const x=r.data;return this._users_document.next(x),this._pagination.next({length:r.page_info.count,pageIndex:t,pageSize:a}),x}}))}delete_user_document(t){return this._httpClient.delete(`${h.N.API_ENDPOINT+d.b.users.delete_user_document}/${t}`)}delete_user_account(t){return this._httpClient.delete(`${h.N.API_ENDPOINT+d.b.users.delete_user_document}/${t}`)}update_status_user_document(t,a){return this._httpClient.put(`${h.N.API_ENDPOINT+d.b.users.update_status_document}/${t}`,{...a})}getAll_users_wallet(t=0,a=10,i,c,f){let m=t+1,p=h.N.API_ENDPOINT+d.b.users.all_users_wallet,r=(new e.LE).set("page",m).set("limit",a);return i&&(r=r.append("type",i)),c&&(r=r.append("for_type",c)),f&&(r=r.append("email",f)),this._httpClient.get(`${p}`,{params:r}).pipe((0,C.U)(x=>{if(x.success){const o=x.data;return this._all_users_wallet.next(o),this._pagination.next({length:x.page_info.count,pageIndex:t,pageSize:a}),o}}))}sendAdminOto(){return this._httpClient.post(`${h.N.API_ENDPOINT+d.b.users.admin_otp}`,{})}Update_user_wallet(t,a){return this._httpClient.put(`${h.N.API_ENDPOINT+d.b.users.update_user_wallet}/${t}`,{...a})}update_user_information(t,a){return this._httpClient.put(`${h.N.API_ENDPOINT+d.b.users.update_user_information}/${t}`,{...a})}resend_email(t){return this._httpClient.post(`${h.N.API_ENDPOINT+d.b.users.resend_email}`,{user_id:t})}download_batch_refill_request(t){return new D.y(a=>{this._httpClient.head(t,{observe:"response"}).subscribe(i=>{console.log("response",i);const c=i.headers;console.log("headers received",i.headers);const f=c.get("Content-Disposition"),p=/filename[^;=\n]*=((['"]).*?\2|[^;\n]*)/.exec(f),r=null!==p&&p[1]?p[1].replace(/['"]/g,""):"file";console.log("fileName",r),console.log("contentDisposition",f),console.log("matches",p),console.log("fileName",r),this._httpClient.get(t,{responseType:"blob"}).subscribe(x=>{const o=document.createElement("a");o.href=URL.createObjectURL(x),o.download=r,o.click(),a.next(),a.complete()})})})}user_batch_refill_requests_all(t=0,a=10,i){let c=t+1,f=h.N.API_ENDPOINT+d.b.users.users_batch_refill_requests,m=(new e.LE).set("page",c).set("limit",a);return i&&(m=m.append("search",i)),this._httpClient.get(`${f}`,{params:m}).pipe((0,C.U)(p=>{if(p.success){const r=p.data;return this._users_batch_refill_requests.next(r),this._pagination.next({length:p.page_info.count,pageIndex:t,pageSize:a}),r}}))}delete_bulk(t){return this._httpClient.delete(`${h.N.API_ENDPOINT+d.b.users.delete_bulk}/${t}`)}all_emails(){let t=h.N.API_ENDPOINT+d.b.users.all_users_emails,a=(new e.LE).set("page",-1);return this._httpClient.get(`${t}`,{params:a}).pipe((0,C.U)(i=>{if(i.success)return i.data}))}get_all_wishlist(t=0,a=10){let i=t+1,c=h.N.API_ENDPOINT+d.b.users.all_wishlist,f=(new e.LE).set("page",i).set("limit",a);return this._httpClient.get(`${c}`,{params:f}).pipe((0,C.U)(m=>{if(m.success){const p=m.data;return this._all_wishlist.next(p),this._pagination.next({length:m.page_info.count,pageIndex:t,pageSize:a}),p}}))}onPdfviewNewTab(t){return this._httpClient.get(t,{responseType:"blob"}).pipe((0,C.U)(a=>new Blob([a.blob()],{type:"application/pdf"})))}gest_users(t=0,a=10,i,c,f,m,p){let r=t;-1!=t&&(r=t+1);let x=h.N.API_ENDPOINT+d.b.users.gest_users,o=(new e.LE).set("page",r);return a&&-1!==t&&(o=o.append("limit",a)),f&&(o=o.append("name",f)),c&&(o=o.append("phone",c)),i&&(o=o.append("email",i)),m&&(o=o.append("start_date",m)),p&&(o=o.append("end_data",p)),this._httpClient.get(`${x}`,{params:o}).pipe((0,C.U)(T=>{if(T.success){const U=T.data;return this._guest_users.next(U),this._pagination.next({length:T.page_info.count,pageIndex:t,pageSize:a}),U}}))}get_all_newsLetters(t=0,a=10,i,c,f){let m=t;-1!=t&&(m=t+1);let p=h.N.API_ENDPOINT+d.b.users.all_newsLetters,r=(new e.LE).set("page",m);return a&&-1!==t&&(r=r.append("limit",a)),i&&(r=r.append("search",i)),c&&(r=r.append("start_date",c)),f&&(r=r.append("end_data",f)),this._httpClient.get(`${p}`,{params:r}).pipe((0,C.U)(x=>{if(x.success){const o=x.data;return this._all_newsLetters.next(o),this._pagination.next({length:x.page_info.count,pageIndex:t,pageSize:a}),o}}))}static#e=this.\u0275fac=function(a){return new(a||v)(y.LFG(e.eN))};static#t=this.\u0275prov=y.Yz7({token:v,factory:v.\u0275fac,providedIn:"root"})}return v})()}}]);