"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[2437],{2437:(F,v,i)=>{i.r(v),i.d(v,{default:()=>O});var g=i(6814),t=i(5879),c=i(6223),m=i(2296),e=i(8699),I=i(3519),A=i.n(I),f=i(171),b=i(1043),r=i(4516),l=i(617),d=i(6170),x=i(7700),_=i(1993),P=i(4664);function T(s,h){1&s&&(t.ynx(0),t.TgZ(1,"h2",18),t._uU(2," Add Category Card Designer "),t.qZA(),t.BQk())}function D(s,h){1&s&&(t.ynx(0),t.TgZ(1,"h2",18),t._uU(2," Edit Category Card Designer "),t.qZA(),t.BQk())}function y(s,h){1&s&&(t.ynx(0),t._UZ(1,"img",19),t.BQk())}function N(s,h){if(1&s){const n=t.EpF();t.TgZ(0,"div",22)(1,"button",23),t.NdJ("click",function(a){const p=t.CHM(n).index;return t.oxw(2).removeFile(p,"front"),t.KtG(a.stopPropagation())}),t._UZ(2,"mat-icon",24),t.qZA(),t.TgZ(3,"button",25),t.NdJ("click",function(a){const p=t.CHM(n).index;return t.oxw(2).fullscreen(p,"front"),t.KtG(a.stopPropagation())}),t._UZ(4,"mat-icon",26),t.qZA(),t._UZ(5,"img",27),t.qZA()}if(2&s){const n=h.$implicit;t.xp6(2),t.Q6J("svgIcon","heroicons_outline:trash"),t.xp6(3),t.Q6J("src",n.url,t.LSH)("alt",n.name)}}function Z(s,h){if(1&s&&(t.ynx(0),t.TgZ(1,"div",20),t.YNc(2,N,6,3,"div",21),t.qZA(),t.BQk()),2&s){const n=t.oxw();t.xp6(2),t.Q6J("ngForOf",n.selectedImagesForProduct)}}function E(s,h){if(1&s){const n=t.EpF();t.TgZ(0,"div",22)(1,"button",23),t.NdJ("click",function(a){const p=t.CHM(n).index;return t.oxw(2).removeFile(p,"back"),t.KtG(a.stopPropagation())}),t._UZ(2,"mat-icon",24),t.qZA(),t.TgZ(3,"button",25),t.NdJ("click",function(a){const p=t.CHM(n).index;return t.oxw(2).fullscreen(p,"url"),t.KtG(a.stopPropagation())}),t._UZ(4,"mat-icon",26),t.qZA(),t._UZ(5,"img",27),t.qZA()}if(2&s){const n=h.$implicit;t.xp6(2),t.Q6J("svgIcon","heroicons_outline:trash"),t.xp6(3),t.Q6J("src",n,t.LSH)("alt",n)}}function w(s,h){if(1&s&&(t.ynx(0),t.TgZ(1,"div",20),t.YNc(2,E,6,3,"div",21),t.qZA(),t.BQk()),2&s){const n=t.oxw();t.xp6(2),t.Q6J("ngForOf",n.selectedImagesForProductFromBack)}}const O=[{path:"",component:(()=>{class s{constructor(){this.selectedImagesForProduct=[],this.selectedImagesForProductFromBack=[],this.isLoading=!0,this.card=null,this.mode="add",this.languages=[],this.statustypes=["active","inActive"],this.toast=A().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:4e3}),this._formBuilder=(0,t.f3M)(c.QS),this.destroyRef=(0,t.f3M)(t.ktI),this.location=(0,t.f3M)(g.Ye),this._cardService=(0,t.f3M)(f.X),this.LangTransatedService=(0,t.f3M)(e.A),this.matDialogRef=(0,t.f3M)(x.uw)}ngOnInit(){this.id&&this._cardService.get_card_designer_by_id(this.id).subscribe({next:n=>{console.log("data",n),this.CardForm.patchValue(n),this.mode="edit",n.all_images&&n.all_images.length>0&&(this.selectedImagesForProductFromBack=n.all_images)}}),this.CardForm=this._formBuilder.group({category_name:["",[c.kI.required]],category_message:["",[c.kI.required]],lang_code:["En"],allow_happy:[!0],status:["active",[c.kI.required]],all_images:[]})}Submit(){"add"!=this.mode?("edit"==this.mode&&!this.selectedImagesForProduct.length&&this.submit_update_WithOrgnalImages(),"edit"==this.mode&&this.selectedImagesForProduct.length&&this.submit_updateDataWithNewImage()):this.submitDataWithNewImage()}submitDataWithNewImage(){this.CardForm.disable(),this._cardService.upload_images(this.selectedImagesForProduct).pipe((0,_.sL)(this.destroyRef),(0,P.w)(o=>{console.log("Uploading image switched ",o),this.CardForm.get("all_images").setValue(o);const a={...this.CardForm.value};return this._cardService.create_cardDesignCategory(a)})).subscribe(o=>{console.log("formResponse",o),this.toast.fire({icon:"success",title:"Success Add New Card Category"}),this.CardForm.enable(),this.resetForm()},o=>{this.toast.fire({icon:"error",title:o?.error.message}),this.CardForm.enable(),console.error("Error occurred:",o)})}submit_updateDataWithNewImage(){this.CardForm.disable(),this._cardService.upload_images(this.selectedImagesForProduct).pipe((0,_.sL)(this.destroyRef),(0,P.w)(o=>{console.log("Uploading image switched ",o);let a=[...this.selectedImagesForProductFromBack];a=a.concat(o),console.log("imgsurl",a),this.CardForm.get("all_images").setValue(a);const u={...this.CardForm.value};return this._cardService.update_card(u,this.id)})).subscribe(o=>{console.log("formResponse",o),this.toast.fire({icon:"success",title:"Success update  Card Category"}),this.CardForm.enable(),this.CardForm.reset(),this.location.back()},o=>{this.toast.fire({icon:"error",title:o?.error.message}),this.CardForm.enable(),console.error("Error occurred:",o)})}submit_update_WithOrgnalImages(){this.CardForm.disable();const n={...this.CardForm.value};this._cardService.update_card(n,this.id).pipe((0,_.sL)(this.destroyRef)).subscribe({next:o=>{this.toast.fire({icon:"success",title:"Success Update Card Category"}),this.CardForm.enable(),this.CardForm.reset(),this.location.back()},error:o=>{this.toast.fire({icon:"error",title:o?.error.message}),this.CardForm.enable(),console.error("Error occurred:",o)}})}backModeAdd(){this.location.getState(),this.mode="add",this.location.back()}backNavigate(){this.location.back()}resetForm(){this.CardForm.reset(),this.selectedImagesForProduct=[]}onFileSelected(n){if(console.log("onFileSelected",event),n.length){this.selectedImagesForProduct=[];for(let o=0;o<n.length;o++){if(o>5)return void this.toast.fire({icon:"warning",title:"maximum images 6 "});const a=n[o],u=new FileReader;u.onload=p=>{a.url=p.target.result},u.readAsDataURL(a),this.selectedImagesForProduct.push(a)}}}removeFile(n,o){"front"==o&&this.selectedImagesForProduct.splice(n,1),"back"==o&&this.selectedImagesForProductFromBack.splice(n,1)}fullscreen(n,o){if("front"==o){let a=this.selectedImagesForProduct.at(n);this.matDialogRef.open(d.J,{maxWidth:"800px",width:"100%",panelClass:"fuse-confirmation-dialog-panel",data:{file:a}})}if("url"==o){let a=this.selectedImagesForProductFromBack.at(n);this.matDialogRef.open(d.J,{maxWidth:"800px",width:"100%",panelClass:"fuse-confirmation-dialog-panel",data:{url:a,mode:"url"}})}}static#t=this.\u0275fac=function(o){return new(o||s)};static#e=this.\u0275cmp=t.Xpm({type:s,selectors:[["app-add-card-designer"]],inputs:{id:"id"},standalone:!0,features:[t.jDz],decls:36,vars:13,consts:[[1,"min-h-full","w-full","pt-4","px-4"],[1,"relative","inset-0","min-w-0","overflow-y-auto","w-full","bg-card","max-h-max","rounded-md","flex","flex-col","min-h-full"],[1,"w-full"],[1,"w-full","px-6","pt-5","pb-4","border-b"],[4,"ngIf"],[1,"flex-auto","pt-5","pb-5","md:px-8","lg:px-18","grid","sm:grid-cols-2","gap-x-6","w-full"],[1,"sm:col-span-2","px-2","h-full","pt-4",3,"formGroup"],["matInput","","placeholder","Category Name",3,"formControlName"],["matInput","","placeholder","Category message",3,"formControlName"],[1,"w-full","min-w-0","border","rounded-md","h-auto","px-12","py-5"],["id","avatar-file-input","type","file","multiple","",1,"absolute","h-0","w-0","opacity-0","invisible","pointer-events-none",3,"accept","change"],["imges","","avatarFileInput",""],[1,"w-full","flex","flex-row","justify-around"],["mat-flat-button","","type","button",1,"block","bg-[#FFF9C4]","text-black","my-3","px-4","py-2",3,"click"],[1,"max-w-screen-xl","mx-auto","w-full","flex","flex-row","justify-end","sm:px-8","pb-8"],[1,"flex","flex-row","gap-x-2"],["type","button","mat-stroked-button","",1,"rounded-md","bg-slate-500","px-4",3,"click"],["type","button","mat-stroked-button","",1,"rounded-md","bg-primary","px-4",3,"disabled","click"],[1,"text-3xl","font-bold"],["src","assets/images/image-upload.svg","alt","img","srcset","",1,"block","min-w-70","min-h-50","max-w-70","max-h-50","object-fill"],[1,"bg-default","min-w-70","min-h-50","w-full","flex","flex-row","flex-wrap"],["class","relative p-3 mx-2 my-1 border rounded bg-card",4,"ngFor","ngForOf"],[1,"relative","p-3","mx-2","my-1","border","rounded","bg-card"],["mat-icon-button","","type","button",1,"absolute","inset-0",3,"click"],[1,"text-red-500",3,"svgIcon"],["mat-icon-button","","type","button",1,"absolute","bottom-1","right-0",3,"click"],["svgIcon","mat_outline:fullscreen",1,"text-primary"],[1,"h-30","w-30","m-2","object-contain",3,"src","alt"]],template:function(o,a){if(1&o){const u=t.EpF();t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),t.YNc(4,T,3,0,"ng-container",4),t.YNc(5,D,3,0,"ng-container",4),t.qZA()(),t.TgZ(6,"div",5)(7,"form",6),t.ynx(8),t.TgZ(9,"mat-form-field",2)(10,"mat-label"),t._uU(11),t.qZA(),t._UZ(12,"input",7),t.qZA(),t.BQk(),t.ynx(13),t.TgZ(14,"mat-form-field",2)(15,"mat-label"),t._uU(16),t.qZA(),t._UZ(17,"textarea",8),t.qZA(),t.BQk(),t.ynx(18),t.TgZ(19,"div",9)(20,"input",10,11),t.NdJ("change",function(){t.CHM(u);const C=t.MAs(22);return t.KtG(a.onFileSelected(C.files))}),t.qZA(),t.TgZ(23,"div",12)(24,"button",13),t.NdJ("click",function(){t.CHM(u);const C=t.MAs(21);return t.KtG(C.click())}),t._uU(25),t.qZA()(),t.YNc(26,y,2,0,"ng-container",4),t.YNc(27,Z,3,1,"ng-container",4),t.YNc(28,w,3,1,"ng-container",4),t.qZA(),t.BQk(),t.qZA()(),t.ynx(29),t.TgZ(30,"div",14)(31,"div",15)(32,"button",16),t.NdJ("click",function(){return a.backNavigate()}),t._uU(33," Back "),t.qZA(),t.TgZ(34,"button",17),t.NdJ("click",function(){return a.Submit()}),t._uU(35," Save "),t.qZA()()(),t.BQk(),t.qZA()()}2&o&&(t.xp6(4),t.Q6J("ngIf","add"==a.mode),t.xp6(1),t.Q6J("ngIf","edit"==a.mode),t.xp6(2),t.Q6J("formGroup",a.CardForm),t.xp6(4),t.Oqu("Category Name "),t.xp6(1),t.Q6J("formControlName","category_name"),t.xp6(4),t.Oqu("Category message "),t.xp6(1),t.Q6J("formControlName","category_message"),t.xp6(3),t.Q6J("accept","image/*"),t.xp6(5),t.hij(" ","Select Image"," "),t.xp6(1),t.Q6J("ngIf",!a.selectedImagesForProduct.length&&!a.selectedImagesForProductFromBack.length),t.xp6(1),t.Q6J("ngIf",a.selectedImagesForProduct.length),t.xp6(1),t.Q6J("ngIf",a.selectedImagesForProductFromBack.length),t.xp6(6),t.Q6J("disabled",a.CardForm.invalid||!a.selectedImagesForProduct.length))},dependencies:[m.ot,m.lW,m.RK,c.UX,c._Y,c.Fj,c.JJ,c.JL,c.sg,c.u,b.lN,b.KE,b.hX,r.c,r.Nt,g.O5,g.ax,l.Ps,l.Hw],styles:["app-add-card-designer[_ngcontent-%COMP%]{display:flex;height:-moz-fit-content;height:fit-content;min-height:100vh;flex-direction:column}"]})}return s})()}]},6170:(F,v,i)=>{i.d(v,{J:()=>b});var g=i(6814),t=i(7700),c=i(617),m=i(2296),e=i(5879);function I(r,l){1&r&&(e.ynx(0),e.TgZ(1,"div",3)(2,"button",4),e._UZ(3,"mat-icon",5),e.qZA()(),e.BQk()),2&r&&(e.xp6(2),e.Q6J("matDialogClose",void 0),e.xp6(1),e.Q6J("svgIcon","heroicons_outline:x-mark"))}function A(r,l){if(1&r&&(e.ynx(0),e.TgZ(1,"div",6),e._UZ(2,"img",7),e.qZA(),e.BQk()),2&r){const d=e.oxw();e.xp6(2),e.Q6J("src",d.data.file.url,e.LSH)("alt",d.data.file.name)}}function f(r,l){if(1&r&&(e.ynx(0),e.TgZ(1,"div",6),e._UZ(2,"img",7),e.qZA(),e.BQk()),2&r){const d=e.oxw();e.xp6(2),e.Q6J("src",d.data.url,e.LSH)("alt","img")}}let b=(()=>{class r{constructor(d){this.data=d,this.mode="file",this.mode=d?.mode?d?.mode:"file"}static#t=this.\u0275fac=function(x){return new(x||r)(e.Y36(t.WI))};static#e=this.\u0275cmp=e.Xpm({type:r,selectors:[["app-privew-image-product-dialog"]],standalone:!0,features:[e.jDz],decls:5,vars:3,consts:[[1,"relative","flex","flex-col","w-full","h-full"],[4,"ngIf"],[1,"max-w-screen-md","max-h-screen"],[1,"absolute","top-0","right-0","pt-4","pr-4"],["mat-icon-button","",3,"matDialogClose"],[1,"text-secondary",3,"svgIcon"],[1,"overflow-x-scroll","overflow-y-scroll","max-h-1/2","max-w-screen-md"],[1,"object-cover","max-h-min","max-w-screen-md",3,"src","alt"]],template:function(x,_){1&x&&(e.TgZ(0,"div",0),e.YNc(1,I,4,2,"ng-container",1),e.TgZ(2,"div",2),e.YNc(3,A,3,2,"ng-container",1),e.YNc(4,f,3,2,"ng-container",1),e.qZA()()),2&x&&(e.xp6(1),e.Q6J("ngIf",!0),e.xp6(2),e.Q6J("ngIf",_.data.file&&"file"===_.mode),e.xp6(1),e.Q6J("ngIf",_.data.url&&"url"===_.mode))},dependencies:[g.O5,m.ot,m.RK,t.Is,t.ZT,c.Ps,c.Hw],styles:["@media (min-width: 960px){.fuse-confirmation-dialog-panel{width:32rem}}.fuse-confirmation-dialog-panel .mat-mdc-dialog-container .mat-mdc-dialog-surface{padding:0!important}\n"],encapsulation:2})}return r})()},8699:(F,v,i)=>{i.d(v,{A:()=>A});var g=i(553),t=i(5619),c=i(7398),m=i(3074),e=i(9862),I=i(5879);let A=(()=>{class f{get langs$(){return this._langs.asObservable()}constructor(r){this._httpClient=r,this._langs=new t.X(null)}getLanguages(){let r=g.N.API_ENDPOINT+m.b.TRANSLATE.all_languages;const l=(new e.LE).set("page",-1);return this._httpClient.get(`${r}`,{params:l}).pipe((0,c.U)(d=>{if(d.success){const _=d.data.filter(P=>"active"===P.status);return this._langs.next(_),_}}))}translateColor(r){return this._httpClient.post(`${g.N.API_ENDPOINT+m.b.TRANSLATE.create_color_translate}`,{...r})}translateCategory(r){return this._httpClient.post(`${g.N.API_ENDPOINT+m.b.TRANSLATE.create_category_translate}`,{...r})}translateBrand(r){return this._httpClient.post(`${g.N.API_ENDPOINT+m.b.TRANSLATE.create_brand_translate}`,{...r})}product_translation(r){return this._httpClient.post(`${g.N.API_ENDPOINT+m.b.TRANSLATE.create_product_translation}`,{...r})}copon_translate(r){return this._httpClient.post(`${g.N.API_ENDPOINT+m.b.TRANSLATE.create_copon_translate}`,{...r})}referralProgram_translate(r){return this._httpClient.post(`${g.N.API_ENDPOINT+m.b.TRANSLATE.create_referralProgram_translate}`,{...r})}static#t=this.\u0275fac=function(l){return new(l||f)(I.LFG(e.eN))};static#e=this.\u0275prov=I.Yz7({token:f,factory:f.\u0275fac,providedIn:"root"})}return f})()}}]);