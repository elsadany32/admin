"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[5049],{5049:(D,R,a)=>{a.r(R),a.d(R,{default:()=>te});var e=a(5879),m=a(6814),g=a(2296),v=a(617),b=a(1476),C=a(5313),U=a(4553),A=a(5742),T=a(53),E=a(2948),t=a(7457),s=a(1993),l=a(836),p=a(9397),d=a(2572),f=a(3997),c=a(4664),o=a(6306),x=a(2181),r=a(2096),w=a(6232),N=a(2596),O=a(3519),y=a.n(O),B=a(9862),S=a(6278);function $(n,_){1&n&&(e.TgZ(0,"th",26),e._uU(1),e.qZA()),2&n&&(e.xp6(1),e.hij(" ","S.No"," "))}function L(n,_){if(1&n&&(e.TgZ(0,"td",27)(1,"span",28),e._uU(2),e.qZA()()),2&n){const i=_.index,u=e.oxw(3);e.xp6(2),e.hij(" ",i+1+u.pageIndex*u.pageSize," ")}}function Z(n,_){1&n&&(e.TgZ(0,"th",29),e._uU(1),e.qZA()),2&n&&(e.xp6(1),e.hij(" ","Full Name"," "))}function z(n,_){if(1&n&&(e.TgZ(0,"td",30),e._uU(1),e.qZA()),2&n){const i=_.$implicit;e.xp6(1),e.hij(" ",null==i||null==i.user_id?null:i.user_id.full_name," ")}}function M(n,_){1&n&&(e.TgZ(0,"th",29),e._uU(1),e.qZA()),2&n&&(e.xp6(1),e.hij(" ","Email"," "))}function Q(n,_){if(1&n&&(e.TgZ(0,"td",30),e._uU(1),e.qZA()),2&n){const i=_.$implicit;e.xp6(1),e.hij(" ",null==i||null==i.user_id?null:i.user_id.email," ")}}function q(n,_){1&n&&(e.TgZ(0,"th",29),e._uU(1),e.qZA()),2&n&&(e.xp6(1),e.hij(" ","Phone"," "))}function j(n,_){if(1&n&&(e.TgZ(0,"td",30),e._uU(1),e.qZA()),2&n){const i=_.$implicit;e.xp6(1),e.hij(" ",null==i||null==i.user_id?null:i.user_id.phone," ")}}function Y(n,_){1&n&&(e.TgZ(0,"th",29),e._uU(1),e.qZA()),2&n&&(e.xp6(1),e.hij(" ","Created"," "))}function J(n,_){if(1&n&&(e.TgZ(0,"td",30)(1,"span",31),e._uU(2),e.ALo(3,"date"),e.qZA()()),2&n){const i=_.$implicit;e.xp6(2),e.hij(" ",e.xi3(3,1,i.createdAt,"dd/MM/yyyy,hh:mm a")," ")}}function H(n,_){1&n&&(e.TgZ(0,"th",32),e._uU(1),e.qZA()),2&n&&(e.xp6(1),e.hij(" ","Action"," "))}function W(n,_){if(1&n){const i=e.EpF();e.TgZ(0,"td",33)(1,"button",34),e.NdJ("click",function(){const I=e.CHM(i).$implicit,P=e.oxw(3);return e.KtG(P.deleteItem(I._id))}),e._UZ(2,"mat-icon",35),e.qZA(),e._UZ(3,"a",36,37),e.TgZ(5,"button",38),e.NdJ("click",function(){e.CHM(i);const h=e.MAs(4);return e.KtG(h.click())}),e._UZ(6,"mat-icon",39),e.qZA()()}if(2&n){const i=_.$implicit;e.xp6(2),e.Q6J("svgIcon","heroicons_outline:trash"),e.xp6(1),e.Q6J("href",null==i?null:i.attachment,e.LSH),e.xp6(2),e.Q6J("matTooltip","Download File")("matTooltipPosition","before")}}function X(n,_){1&n&&e._UZ(0,"tr",40)}function K(n,_){1&n&&e._UZ(0,"tr",41)}function F(n,_){if(1&n&&(e.TgZ(0,"table",11),e.ynx(1,12),e.YNc(2,$,2,1,"th",13),e.YNc(3,L,3,1,"td",14),e.BQk(),e.ynx(4,15),e.YNc(5,Z,2,1,"th",16),e.YNc(6,z,2,1,"td",17),e.BQk(),e.ynx(7,18),e.YNc(8,M,2,1,"th",16),e.YNc(9,Q,2,1,"td",17),e.BQk(),e.ynx(10,19),e.YNc(11,q,2,1,"th",16),e.YNc(12,j,2,1,"td",17),e.BQk(),e.ynx(13,20),e.YNc(14,Y,2,1,"th",16),e.YNc(15,J,4,4,"td",17),e.BQk(),e.ynx(16,21),e.YNc(17,H,2,1,"th",22),e.YNc(18,W,7,4,"td",23),e.BQk(),e.YNc(19,X,1,0,"tr",24),e.YNc(20,K,1,0,"tr",25),e.qZA()),2&n){const i=e.oxw(2);e.Q6J("dataSource",i.users),e.xp6(19),e.Q6J("matHeaderRowDef",i.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",i.displayedColumns)}}function k(n,_){if(1&n&&(e.ynx(0),e.YNc(1,F,21,3,"table",10),e.BQk()),2&n){const i=e.oxw();e.xp6(1),e.Q6J("ngIf",!i.isLoading)}}function G(n,_){if(1&n&&(e.ynx(0),e._UZ(1,"app-loading-skeltons",42),e.BQk()),2&n){const i=e.oxw();e.xp6(1),e.Q6J("skeltonType",i.skletonTable)}}function V(n,_){1&n&&(e.ynx(0),e._UZ(1,"app-empty-state",43),e.BQk()),2&n&&(e.xp6(1),e.Q6J("isSvgImage",!1)("stateTitle","THERE IS NO RESUIT"))}const ee=function(n,_){return{"pointer-events-none":n,hidden:_}},te=[{path:"",component:(()=>{class n{constructor(){this.pageIndex=0,this.pageSize=10,this.total_recoreds=0,this.skletonTable=E.q.TABLE,this.toast=y().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:4e3}),this.destroyRef=(0,e.f3M)(e.ktI),this._UsersService=(0,e.f3M)(t.f),this._fuseConfirmationService=(0,e.f3M)(S.R),this.users=[],this.isLoading=!0,this.pageSizeOptions=[10,20,50,100],this.displayedColumns=["S_No","full_name","email","phone","Created","action"]}ngOnInit(){this._UsersService.updatePagination$({pageIndex:0,pageSize:10,length:0}),this._UsersService._users_batch_refill_requests$.pipe((0,s.sL)(this.destroyRef),(0,l.T)(1),(0,p.b)(u=>{console.log("loading data !",u),this.users=u,this.isLoading=!1})).subscribe(),(0,d.a)([this._UsersService.pagination$.pipe((0,p.b)(u=>{this.pageIndex=u.pageIndex,this.pageSize=u.pageSize}),(0,f.x)((u,h)=>u.pageIndex===h.pageIndex&&u.pageSize===h.pageSize))]).pipe((0,s.sL)(this.destroyRef),(0,c.w)(([u])=>this._UsersService.user_batch_refill_requests_all(u?.pageIndex,u?.pageSize)),(0,o.K)(u=>(this.isLoading=!1,u))).subscribe(),this._UsersService.pagination$.pipe((0,s.sL)(this.destroyRef),(0,p.b)(u=>{this._paginator.length=u.length,this.total_recoreds=u.length,this._paginator.pageIndex=u.pageIndex,this._paginator.pageSize=u.pageSize})).subscribe()}pageChange(i){this._UsersService.updatePagination$(i)}download_file(i){this._UsersService.download_batch_refill_request(i).subscribe({next:u=>{console.log("data",u)},error:u=>{console.log("error",u)}})}deleteItem(i){this._fuseConfirmationService.open({title:"Delete Static Page ",message:"Are you sure you want to remove this item? This action cannot be undone!,",dismissible:!0,icon:{show:!0,name:"feather:alert-circle"},actions:{confirm:{label:"Delete"}}}).afterClosed().pipe((0,x.h)(h=>"confirmed"===h),(0,s.sL)(this.destroyRef),(0,c.w)(()=>this._UsersService.delete_bulk(i).pipe((0,o.K)(h=>(this.toast.fire({icon:"warning",title:h.error?.message}),(0,r.of)(h))))),(0,c.w)(h=>h instanceof B.UA?w.E:(this.toast.fire({icon:"success",title:"Successfully deleted Record"}),this._UsersService.user_batch_refill_requests_all()))).subscribe()}static#e=this.\u0275fac=function(u){return new(u||n)};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-batch-refill-request"]],viewQuery:function(u,h){if(1&u&&e.Gf(b.NW,7),2&u){let I;e.iGM(I=e.CRH())&&(h._paginator=I.first)}},standalone:!0,features:[e.jDz],decls:14,vars:10,consts:[[1,"relative","inset-0","min-w-0","0","w-full"],[1,"flex-auto","pt-9","pb-10","md:px-4","lg:px-6","min-w-max"],[1,"h-full","max-h-max","min-w-max"],[1,"rounded-lg","flex","flex-col","bg-card","h-full","w-full","min-w-max"],[1,"w-full","px-6","pt-10","pb-4","border-b","flex","flex-row","justify-between","items-start"],[1,"text-2xl","font-semibold","w1/2"],[1,"flex","flex-col","flex-auto","min-w-max"],[1,"flex","flex-col","w-full","h-full","max-h-max","min-w-max","border"],[4,"ngIf"],[1,"border",3,"ngClass","pageSizeOptions","showFirstLastButtons","page"],["mat-table","","class","custom-table max-w-full",3,"dataSource",4,"ngIf"],["mat-table","",1,"custom-table","max-w-full",3,"dataSource"],["matColumnDef","S_No"],["mat-header-cell","","class","w-12 px-1",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","full_name"],["mat-header-cell","","class","whitespace-nowrap px-2",4,"matHeaderCellDef"],["mat-cell","","class","whitespace-nowrap px-2",4,"matCellDef"],["matColumnDef","email"],["matColumnDef","phone"],["matColumnDef","Created"],["matColumnDef","action"],["mat-header-cell","","class","whitespace-nowrap px-3",4,"matHeaderCellDef"],["mat-cell","","class","whitespace-nowrap px-3",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["class","hover:bg-hover cursor-pointer","mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell","",1,"w-12","px-1"],["mat-cell",""],[1,"font-medium","text-sm","text-secondary","whitespace-nowrap"],["mat-header-cell","",1,"whitespace-nowrap","px-2"],["mat-cell","",1,"whitespace-nowrap","px-2"],[1,""],["mat-header-cell","",1,"whitespace-nowrap","px-3"],["mat-cell","",1,"whitespace-nowrap","px-3"],["mat-icon-button","",3,"click"],[1,"text-red-500","icon-size-5",3,"svgIcon"],[1,"hidden",3,"href"],["downloadLink",""],["mat-icon-button","",3,"matTooltip","matTooltipPosition","click"],["svgIcon","heroicons_solid:document-arrow-down",1,"text-primary","icon-size-5"],["mat-header-row",""],["mat-row","",1,"hover:bg-hover","cursor-pointer"],[3,"skeltonType"],["stateIcon","heroicons_solid:information-circle",1,"bg-card","rounded-lg",3,"isSvgImage","stateTitle"]],template:function(u,h){1&u&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h2",5),e._uU(6),e.qZA()(),e.TgZ(7,"div",6)(8,"div",7),e.YNc(9,k,2,1,"ng-container",8),e.YNc(10,G,2,1,"ng-container",8),e.ynx(11),e.TgZ(12,"mat-paginator",9),e.NdJ("page",function(P){return h.pageChange(P)}),e.qZA(),e.BQk(),e.YNc(13,V,2,2,"ng-container",8),e.qZA()()()()()()),2&u&&(e.xp6(6),e.hij(" Total Records : ",h.total_recoreds," "),e.xp6(3),e.Q6J("ngIf",h.users.length),e.xp6(1),e.Q6J("ngIf",h.isLoading),e.xp6(2),e.Q6J("ngClass",e.WLB(7,ee,h.isLoading,!h.users.length))("pageSizeOptions",h.pageSizeOptions)("showFirstLastButtons",!0),e.xp6(1),e.Q6J("ngIf",!h.users.length&&!h.isLoading))},dependencies:[m.O5,m.uU,m.mk,b.TU,b.NW,C.p0,C.BZ,C.fO,C.as,C.w1,C.Dz,C.nj,C.ge,C.ev,C.XQ,C.Gk,v.Ps,v.Hw,g.ot,g.RK,U.W,T.vi,A.s,N.AV,N.gM],styles:["app-batch-refill-request[_ngcontent-%COMP%]{display:flex;height:-moz-fit-content;height:fit-content;min-height:100vh;flex-direction:column;--tw-text-opacity: 1;color:rgba(var(--fuse-primary-rgb),var(--tw-text-opacity))}"]})}return n})()}]},7457:(D,R,a)=>{a.d(R,{f:()=>A});var e=a(9862),m=a(3074),g=a(553),v=a(5619),b=a(7398),C=a(5592),U=a(5879);let A=(()=>{class T{get users$(){return this._users.asObservable()}get gest_users$(){return this._guest_users.asObservable()}get all_newsLetters$(){return this._all_newsLetters.asObservable()}get user$(){return this._user.asObservable()}get _users_batch_refill_requests$(){return this._users_batch_refill_requests.asObservable()}get user_document$(){return this._users_document.asObservable()}get all_wishlist$(){return this._all_wishlist.asObservable()}get all_users_wallet$(){return this._all_users_wallet.asObservable()}constructor(t){this._httpClient=t,this._users=new v.X(null),this._guest_users=new v.X(null),this._all_newsLetters=new v.X(null),this._users_batch_refill_requests=new v.X(null),this._user=new v.X(null),this._users_document=new v.X(null),this._all_users_wallet=new v.X(null),this._all_wishlist=new v.X(null),this._pagination=new v.X({pageIndex:0,pageSize:10,length:0})}get pagination$(){return this._pagination.asObservable()}updatePagination$(t){this._pagination.next(t)}getUsers(t=0,s=10,l,p,d,f,c){let o=t;-1!=t&&(o=t+1);let x=g.N.API_ENDPOINT+m.b.users.get_users,r=(new e.LE).set("page",o).set("limit",s);return console.log("email_validate",d),p&&(r=r.append("search",p)),c&&(r=r.append("phone",c)),f&&(r=r.append("email",f)),"boolean"==typeof d&&(r=r.append("verified",d)),l&&(r=r.append("status",l)),this._httpClient.get(`${x}`,{params:r}).pipe((0,b.U)(w=>{if(w.success){const N=w.data;return this._users.next(N),this._pagination.next({length:w.page_info.count,pageIndex:t,pageSize:s}),N}}))}getUserbyId(t){return this._httpClient.get(`${g.N.API_ENDPOINT+m.b.users.get_user}/${t}`).pipe((0,b.U)(l=>{if(l.success){const p=l.data;return this._user.next(p),p}}))}getUsers_documents(t=0,s=10,l,p){let d=t+1,f=g.N.API_ENDPOINT+m.b.users.users_document,c=(new e.LE).set("page",d).set("limit",s);return p&&(c=c.append("email",p)),l&&(c=c.append("status",l)),this._httpClient.get(`${f}`,{params:c}).pipe((0,b.U)(o=>{if(o.success){const x=o.data;return this._users_document.next(x),this._pagination.next({length:o.page_info.count,pageIndex:t,pageSize:s}),x}}))}delete_user_document(t){return this._httpClient.delete(`${g.N.API_ENDPOINT+m.b.users.delete_user_document}/${t}`)}delete_user_account(t){return this._httpClient.delete(`${g.N.API_ENDPOINT+m.b.users.delete_user_document}/${t}`)}update_status_user_document(t,s){return this._httpClient.put(`${g.N.API_ENDPOINT+m.b.users.update_status_document}/${t}`,{...s})}getAll_users_wallet(t=0,s=10,l,p,d){let f=t+1,c=g.N.API_ENDPOINT+m.b.users.all_users_wallet,o=(new e.LE).set("page",f).set("limit",s);return l&&(o=o.append("type",l)),p&&(o=o.append("for_type",p)),d&&(o=o.append("email",d)),this._httpClient.get(`${c}`,{params:o}).pipe((0,b.U)(x=>{if(x.success){const r=x.data;return this._all_users_wallet.next(r),this._pagination.next({length:x.page_info.count,pageIndex:t,pageSize:s}),r}}))}sendAdminOto(){return this._httpClient.post(`${g.N.API_ENDPOINT+m.b.users.admin_otp}`,{})}Update_user_wallet(t,s){return this._httpClient.put(`${g.N.API_ENDPOINT+m.b.users.update_user_wallet}/${t}`,{...s})}update_user_information(t,s){return this._httpClient.put(`${g.N.API_ENDPOINT+m.b.users.update_user_information}/${t}`,{...s})}resend_email(t){return this._httpClient.post(`${g.N.API_ENDPOINT+m.b.users.resend_email}`,{user_id:t})}download_batch_refill_request(t){return new C.y(s=>{this._httpClient.head(t,{observe:"response"}).subscribe(l=>{console.log("response",l);const p=l.headers;console.log("headers received",l.headers);const d=p.get("Content-Disposition"),c=/filename[^;=\n]*=((['"]).*?\2|[^;\n]*)/.exec(d),o=null!==c&&c[1]?c[1].replace(/['"]/g,""):"file";console.log("fileName",o),console.log("contentDisposition",d),console.log("matches",c),console.log("fileName",o),this._httpClient.get(t,{responseType:"blob"}).subscribe(x=>{const r=document.createElement("a");r.href=URL.createObjectURL(x),r.download=o,r.click(),s.next(),s.complete()})})})}user_batch_refill_requests_all(t=0,s=10,l){let p=t+1,d=g.N.API_ENDPOINT+m.b.users.users_batch_refill_requests,f=(new e.LE).set("page",p).set("limit",s);return l&&(f=f.append("search",l)),this._httpClient.get(`${d}`,{params:f}).pipe((0,b.U)(c=>{if(c.success){const o=c.data;return this._users_batch_refill_requests.next(o),this._pagination.next({length:c.page_info.count,pageIndex:t,pageSize:s}),o}}))}delete_bulk(t){return this._httpClient.delete(`${g.N.API_ENDPOINT+m.b.users.delete_bulk}/${t}`)}all_emails(){let t=g.N.API_ENDPOINT+m.b.users.all_users_emails,s=(new e.LE).set("page",-1);return this._httpClient.get(`${t}`,{params:s}).pipe((0,b.U)(l=>{if(l.success)return l.data}))}get_all_wishlist(t=0,s=10){let l=t+1,p=g.N.API_ENDPOINT+m.b.users.all_wishlist,d=(new e.LE).set("page",l).set("limit",s);return this._httpClient.get(`${p}`,{params:d}).pipe((0,b.U)(f=>{if(f.success){const c=f.data;return this._all_wishlist.next(c),this._pagination.next({length:f.page_info.count,pageIndex:t,pageSize:s}),c}}))}onPdfviewNewTab(t){return this._httpClient.get(t,{responseType:"blob"}).pipe((0,b.U)(s=>new Blob([s.blob()],{type:"application/pdf"})))}gest_users(t=0,s=10,l,p,d,f,c){let o=t;-1!=t&&(o=t+1);let x=g.N.API_ENDPOINT+m.b.users.gest_users,r=(new e.LE).set("page",o);return s&&-1!==t&&(r=r.append("limit",s)),d&&(r=r.append("name",d)),p&&(r=r.append("phone",p)),l&&(r=r.append("email",l)),f&&(r=r.append("start_date",f)),c&&(r=r.append("end_data",c)),this._httpClient.get(`${x}`,{params:r}).pipe((0,b.U)(w=>{if(w.success){const N=w.data;return this._guest_users.next(N),this._pagination.next({length:w.page_info.count,pageIndex:t,pageSize:s}),N}}))}get_all_newsLetters(t=0,s=10,l,p,d){let f=t;-1!=t&&(f=t+1);let c=g.N.API_ENDPOINT+m.b.users.all_newsLetters,o=(new e.LE).set("page",f);return s&&-1!==t&&(o=o.append("limit",s)),l&&(o=o.append("search",l)),p&&(o=o.append("start_date",p)),d&&(o=o.append("end_data",d)),this._httpClient.get(`${c}`,{params:o}).pipe((0,b.U)(x=>{if(x.success){const r=x.data;return this._all_newsLetters.next(r),this._pagination.next({length:x.page_info.count,pageIndex:t,pageSize:s}),r}}))}static#e=this.\u0275fac=function(s){return new(s||T)(U.LFG(e.eN))};static#t=this.\u0275prov=U.Yz7({token:T,factory:T.\u0275fac,providedIn:"root"})}return T})()}}]);