"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[6061],{6061:(st,Z,a)=>{a.r(Z),a.d(Z,{default:()=>at});var t=a(5879),_=a(6814),r=a(6223),d=a(2296),M=a(3680),p=a(7700),h=a(617),C=a(4516),b=a(1476),P=a(8525),m=a(5313),w=a(4553),N=a(836),c=a(9397),Q=a(2572),T=a(3997),I=a(7921),x=a(4664),v=a(6306),y=a(2181),g=a(1993),U=a(6278),J=a(3519),S=a.n(J),D=a(2948),A=a(1723),u=a(1043),R=a(4451),j=a.n(R);function Y(e,s){1&e&&(t.ynx(0),t._uU(1),t.BQk()),2&e&&(t.xp6(1),t.hij(" ","Add New Profit Margin "," "))}function B(e,s){1&e&&(t.ynx(0),t._uU(1),t.BQk()),2&e&&(t.xp6(1),t.hij(" ","Edit Profit Margin"," "))}function L(e,s){1&e&&t._UZ(0,"mat-progress-spinner",19),2&e&&t.Q6J("diameter",24)("mode","indeterminate")}let F=(()=>{class e{constructor(i,o,n,l,f){this._formBuilder=i,this.matDialogRef=o,this.data=n,this._siteContentService=l,this.destroyRef=f,this.mode="add",this.PofitItem=null,this.toast=S().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:4e3})}ngOnInit(){if(console.log("this data is",this.data),this.profitForm=this._formBuilder.group({name:["",[r.kI.required]],value:["",[r.kI.required,r.kI.min(0),r.kI.max(100)]]}),this.data.item){this.mode="edit",console.log("this data ",this.data.item);let i=j()(this.data.item);i.value=(100*i.value-100).toFixed(0),this.PofitItem=i,this.profitForm.patchValue(this.PofitItem)}}submit(){if(this.profitForm.invalid)return;let i=this.profitForm.value;i.value=i.value/100+1,"edit"===this.mode?(console.log("paylaod",i),this.edititem(i,this.PofitItem._id)):this.additem(i)}additem(i){this._siteContentService.create_profitMargin(i).pipe((0,g.sL)(this.destroyRef),(0,c.b)(o=>{o.success?(this.toast.fire({icon:"success",title:"Success Add New proft Margin Item"}),this.matDialogRef.close("confirmed")):(this.toast.fire({icon:"error",title:o?.message}),this.profitForm.enable())}),(0,v.K)(o=>(console.log("error",o.error.message),this.toast.fire({icon:"error",title:o.error.message}),this.profitForm.enable(),o))).subscribe()}edititem(i,o){this._siteContentService.update_profitMargin(i,o).pipe((0,g.sL)(this.destroyRef),(0,c.b)(n=>{n.success?(this.toast.fire({icon:"success",title:"Success update Profit margin item"}),this.matDialogRef.close("confirmed")):(this.toast.fire({icon:"error",title:n?.message}),this.profitForm.enable())}),(0,v.K)(n=>(console.log("error",n),this.toast.fire({icon:"error",title:n.error.message}),this.profitForm.enable(),n))).subscribe()}static#t=this.\u0275fac=function(o){return new(o||e)(t.Y36(r.QS),t.Y36(p.so),t.Y36(p.WI),t.Y36(A.A),t.Y36(t.ktI))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-add-pofit"]],standalone:!0,features:[t.jDz],decls:35,vars:11,consts:[[1,"flex","flex-col","flex-auto"],[1,"flex","items-center","justify-between","pb-2"],[1,"text-xl","md:text-2xl","font-bold","tracking-tight","leading-7","sm:leading-10","truncate"],[4,"ngIf"],["mat-dialog-close","","mat-icon-button",""],["svgIcon","heroicons_outline:x-circle",1,"text-primary"],[1,"w-full","border-t"],[1,"grid","sm:grid-cols-2","gap-6","w-full","mt-4","border-b","mb-4","pb-4",3,"formGroup"],[1,"sm:col-span-2"],[1,"w-full"],["matInput","",3,"formControlName"],[1,"fuse-mat-emphasized-affix","w-full"],["matInput","","min","0","max","100","type","number",3,"formControlName"],["matPrefix",""],[1,"dark:text-gray-400","capitalize","pt-2"],[1,"w-full","flex","items-center","justify-center","sm:justify-end","px-2","pt-4","space-x-3"],["mat-stroked-button","","mat-dialog-close","","type","button"],["mat-flat-button","","type","button","color","primary",1,"px-8",3,"disabled","click"],[3,"diameter","mode",4,"ngIf"],[3,"diameter","mode"]],template:function(o,n){1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div")(3,"h2",2),t.YNc(4,Y,2,1,"ng-container",3),t.YNc(5,B,2,1,"ng-container",3),t.qZA()(),t.TgZ(6,"button",4),t._UZ(7,"mat-icon",5),t.qZA()(),t.TgZ(8,"div",6)(9,"form",7)(10,"div",8)(11,"div",9)(12,"mat-form-field",9)(13,"mat-label"),t._uU(14),t.qZA(),t._UZ(15,"input",10),t.qZA()(),t.TgZ(16,"div",8)(17,"mat-form-field",11)(18,"mat-label"),t._uU(19),t.qZA(),t._UZ(20,"input",12),t.TgZ(21,"span",13),t._uU(22,"%"),t.qZA(),t.TgZ(23,"mat-hint")(24,"span",14),t._uU(25," accept value from 0 to 100"),t.qZA()()()()()()(),t.ynx(26),t.TgZ(27,"div",15),t.ynx(28),t.TgZ(29,"button",16),t._uU(30),t.qZA(),t.BQk(),t.ynx(31),t.TgZ(32,"button",17),t.NdJ("click",function(){return n.submit()}),t.YNc(33,L,1,2,"mat-progress-spinner",18),t._uU(34),t.qZA(),t.BQk(),t.qZA(),t.BQk(),t.qZA()),2&o&&(t.xp6(4),t.Q6J("ngIf","add"===n.mode),t.xp6(1),t.Q6J("ngIf","edit"===n.mode),t.xp6(4),t.Q6J("formGroup",n.profitForm),t.xp6(5),t.Oqu("Name"),t.xp6(1),t.Q6J("formControlName","name"),t.xp6(4),t.Oqu("Value %"),t.xp6(1),t.Q6J("formControlName","value"),t.xp6(10),t.hij(" ","cance"," "),t.xp6(2),t.Q6J("disabled",n.profitForm.invalid),t.xp6(1),t.Q6J("ngIf",n.profitForm.disabled),t.xp6(1),t.hij(" ","Save"," "))},dependencies:[_.O5,h.Ps,h.Hw,d.ot,d.lW,d.RK,u.lN,u.KE,u.hX,u.bx,u.qo,r.UX,r._Y,r.Fj,r.wV,r.JJ,r.JL,r.qQ,r.Fd,r.sg,r.u,C.c,C.Nt,p.Is,p.ZT]})}return e})();var k=a(5742),z=a(53);function H(e,s){1&e&&(t.TgZ(0,"th",22),t._uU(1),t.qZA()),2&e&&(t.xp6(1),t.hij(" ","S.No"," "))}function O(e,s){if(1&e&&(t.TgZ(0,"td",23)(1,"span",24),t._uU(2),t.qZA()()),2&e){const i=s.index,o=t.oxw(3);t.xp6(2),t.hij(" ",i+1+o.pageIndex*o.pageSize," ")}}function K(e,s){1&e&&(t.TgZ(0,"th",25),t._uU(1),t.qZA()),2&e&&(t.xp6(1),t.hij(" ","name"," "))}function W(e,s){if(1&e&&(t.TgZ(0,"td",23),t._uU(1),t.qZA()),2&e){const i=s.$implicit;t.xp6(1),t.hij(" ",i.name," ")}}function E(e,s){1&e&&(t.TgZ(0,"th",25),t._uU(1),t.qZA()),2&e&&(t.xp6(1),t.hij(" ","Value"," "))}function $(e,s){if(1&e&&(t.TgZ(0,"td",23),t._uU(1),t.qZA()),2&e){const i=s.$implicit;t.xp6(1),t.hij(" ",(100*i.value-100).toFixed(0)+"%"," ")}}function G(e,s){1&e&&(t.TgZ(0,"th",26),t._uU(1),t.qZA()),2&e&&(t.xp6(1),t.hij(" ","Action"," "))}function X(e,s){if(1&e){const i=t.EpF();t.TgZ(0,"td",23)(1,"button",27),t.NdJ("click",function(){const l=t.CHM(i).$implicit,f=t.oxw(3);return t.KtG(f.delete_item(l._id))}),t._UZ(2,"mat-icon",28),t.qZA(),t.TgZ(3,"button",27),t.NdJ("click",function(){const l=t.CHM(i).$implicit,f=t.oxw(3);return t.KtG(f.addItem(l,"edit"))}),t._UZ(4,"mat-icon",29),t.qZA()()}2&e&&(t.xp6(2),t.Q6J("svgIcon","heroicons_outline:trash"),t.xp6(2),t.Q6J("svgIcon","heroicons_solid:pencil-square"))}function V(e,s){1&e&&t._UZ(0,"tr",30)}function q(e,s){1&e&&t._UZ(0,"tr",31)}function tt(e,s){if(1&e&&(t.TgZ(0,"table",11),t.ynx(1,12),t.YNc(2,H,2,1,"th",13),t.YNc(3,O,3,1,"td",14),t.BQk(),t.ynx(4,15),t.YNc(5,K,2,1,"th",16),t.YNc(6,W,2,1,"td",14),t.BQk(),t.ynx(7,17),t.YNc(8,E,2,1,"th",16),t.YNc(9,$,2,1,"td",14),t.BQk(),t.ynx(10,18),t.YNc(11,G,2,1,"th",19),t.YNc(12,X,5,2,"td",14),t.BQk(),t.YNc(13,V,1,0,"tr",20),t.YNc(14,q,1,0,"tr",21),t.qZA()),2&e){const i=t.oxw(2);t.Q6J("dataSource",i.profits),t.xp6(13),t.Q6J("matHeaderRowDef",i.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",i.displayedColumns)}}function et(e,s){if(1&e&&(t.ynx(0),t.YNc(1,tt,15,3,"table",10),t.BQk()),2&e){const i=t.oxw();t.xp6(1),t.Q6J("ngIf",!i.isLoading)}}function it(e,s){if(1&e&&(t.ynx(0),t._UZ(1,"app-loading-skeltons",32),t.BQk()),2&e){const i=t.oxw();t.xp6(1),t.Q6J("skeltonType",i.skletonTable)}}function nt(e,s){1&e&&(t.ynx(0),t._UZ(1,"app-empty-state",33),t.BQk()),2&e&&(t.xp6(1),t.Q6J("isSvgImage",!1)("stateTitle","THERE IS NO RESUIT"))}const ot=function(e,s){return{"pointer-events-none":e,hidden:s}},at=[{path:"",component:(()=>{class e{constructor(){this.pageIndex=0,this.pageSize=0,this.total_recoreds=0,this.status="",this.profits=[],this.LangStatus=[{value:"active",name:"Active"},{value:"inActive",name:"InActive"},{value:"",name:"All Status"}],this.skletonTable=D.q.TABLE,this.toast=S().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:4e3}),this.isLoading=!0,this._fuseConfirmationService=(0,t.f3M)(U.R),this.matDialogRef=(0,t.f3M)(p.uw),this.destroyRef=(0,t.f3M)(t.ktI),this._SiteContentService=(0,t.f3M)(A.A),this.statusInputControl=new r.p4,this.SearchInputControl=new r.p4,this.displayedColumns=["S_No","name","value","action"]}ngOnInit(){this._SiteContentService.profits_margin$.pipe((0,g.sL)(this.destroyRef),(0,N.T)(1),(0,c.b)(i=>{console.log("loading data !",i),this.profits=i,this.isLoading=!1})).subscribe(),(0,Q.a)([this._SiteContentService.pagination$.pipe((0,c.b)(i=>{this.pageIndex=i.pageIndex,this.pageSize=i.pageSize}),(0,T.x)((i,o)=>i.pageIndex===o.pageIndex)),this.statusInputControl.valueChanges.pipe((0,I.O)(""),(0,T.x)()),this.SearchInputControl.valueChanges.pipe((0,I.O)(""),(0,T.x)(),(0,c.b)(()=>{this.statusInputControl.setValue("")}))]).pipe((0,g.sL)(this.destroyRef),(0,x.w)(([i,o,n])=>(this.isLoading=!0,this._SiteContentService.get_profitMargin())),(0,v.K)(i=>(this.isLoading=!1,i))).subscribe(),this._SiteContentService.pagination$.pipe((0,g.sL)(this.destroyRef),(0,c.b)(i=>{this._paginator.length=i.length,this.total_recoreds=i.length,this._paginator.pageIndex=i.pageIndex,this._paginator.pageSize=i.pageSize})).subscribe()}pageChange(i){this._SiteContentService.updatePagination$(i)}addItem(i,o){this.matDialogRef.open(F,{maxWidth:"600px",width:"100%",panelClass:"tag-dialog",data:{item:i,mode:o}}).afterClosed().pipe((0,y.h)(l=>"confirmed"===l),(0,x.w)(()=>this._SiteContentService.get_profitMargin())).subscribe()}delete_item(i){this._fuseConfirmationService.open({title:"Delete Profit Margin Item",message:"Are you sure you want to remove this item? This action cannot be undone!,",dismissible:!0,icon:{show:!0,name:"feather:alert-circle"},actions:{confirm:{label:"Delete"}}}).afterClosed().pipe((0,y.h)(n=>"confirmed"===n),(0,x.w)(()=>this._SiteContentService.delete__profitMargin(i).pipe((0,v.K)(n=>(this.toast.fire({icon:"warning",title:"warning something !"}),n)),(0,c.b)(()=>{this.isLoading=!0,this.toast.fire({icon:"success",title:"Successfully deleted Margin Profit"})}))),(0,x.w)(()=>this._SiteContentService.get_profitMargin())).subscribe()}static#t=this.\u0275fac=function(o){return new(o||e)};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-profit-margin"]],viewQuery:function(o,n){if(1&o&&t.Gf(b.NW,7),2&o){let l;t.iGM(l=t.CRH())&&(n._paginator=l.first)}},standalone:!0,features:[t.jDz],decls:15,vars:10,consts:[[1,"h-full","max-h-max","max-w-full","min-w-max","w-full","pt-9","pb-9","md:px-8","lg:px-12","mx-auto"],[1,"rounded-lg","flex","flex-col","bg-card","h-full","min-w-max","mx-auto"],[1,"w-full","px-5","pt-5","pb-4","border-b","flex","justify-between"],[1,"text-2xl","font-semibold"],["mat-button","",1,"bg-accent","text-on-accent",3,"click"],[1,"relative","flex","flex-row","sm:flex-row","flex-0","sm:items-end","sm:justify-between","py-4","px-6","md:px-2","border-b","w-full"],[1,"flex","flex-col","flex-auto"],[1,"flex","flex-col","w-full","h-full","max-h-max","max-w-full"],[4,"ngIf"],[1,"border",3,"ngClass","showFirstLastButtons","page"],["mat-table","","class","custom-table max-w-full",3,"dataSource",4,"ngIf"],["mat-table","",1,"custom-table","max-w-full",3,"dataSource"],["matColumnDef","S_No"],["mat-header-cell","","class","w-12 px-1",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","value"],["matColumnDef","action"],["mat-header-cell","","class","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["class","hover:bg-hover cursor-pointer","mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell","",1,"w-12","px-1"],["mat-cell",""],[1,"font-medium","text-sm","text-secondary","whitespace-nowrap"],["mat-header-cell",""],["mat-header-cell","",1,""],["mat-icon-button","",3,"click"],[1,"text-red-500","icon-size-5",3,"svgIcon"],[1,"icon-size-5","text-slate-800",3,"svgIcon"],["mat-header-row",""],["mat-row","",1,"hover:bg-hover","cursor-pointer"],[3,"skeltonType"],["stateIcon","heroicons_solid:information-circle",1,"bg-card","rounded-lg",3,"isSvgImage","stateTitle"]],template:function(o,n){1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2",3),t._uU(4),t.qZA(),t.TgZ(5,"button",4),t.NdJ("click",function(){return n.addItem()}),t._uU(6),t.qZA()(),t._UZ(7,"div",5),t.TgZ(8,"div",6)(9,"div",7),t.YNc(10,et,2,1,"ng-container",8),t.YNc(11,it,2,1,"ng-container",8),t.ynx(12),t.TgZ(13,"mat-paginator",9),t.NdJ("page",function(f){return n.pageChange(f)}),t.qZA(),t.BQk(),t.YNc(14,nt,2,2,"ng-container",8),t.qZA()()()()),2&o&&(t.xp6(4),t.hij(" Total Records : ",n.total_recoreds," "),t.xp6(2),t.hij(" ","Add New Item"," "),t.xp6(4),t.Q6J("ngIf",n.profits.length),t.xp6(1),t.Q6J("ngIf",n.isLoading),t.xp6(2),t.Q6J("ngClass",t.WLB(7,ot,n.isLoading,!n.profits.length))("showFirstLastButtons",!0),t.xp6(1),t.Q6J("ngIf",!n.profits.length&&!n.isLoading))},dependencies:[_.O5,_.mk,b.TU,b.NW,m.p0,m.BZ,m.fO,m.as,m.w1,m.Dz,m.nj,m.ge,m.ev,m.XQ,m.Gk,h.Ps,h.Hw,d.ot,d.lW,d.RK,w.W,C.c,r.UX,P.LD,M.si,p.Is,z.vi,k.s],styles:["app-profit-margin[_ngcontent-%COMP%]{display:flex;height:-moz-fit-content;height:fit-content;min-height:100vh;flex-direction:column}"]})}return e})()}]}}]);