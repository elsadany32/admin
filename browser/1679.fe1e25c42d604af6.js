"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[1679],{1679:(k,h,r)=>{r.r(h),r.d(h,{default:()=>W});var t=r(5879),p=r(6814),i=r(6223),m=r(5940),f=r(3680),g=r(8525),A=r(2596),u=r(4516),b=r(1043),l=r(2296),s=r(617),C=r(3963),y=r(8699),x=r(3519),B=r.n(x),J=r(9397),Q=r(4664),F=r(9862),N=r(3074),T=r(553),O=r(5619),E=r(7398);let q=(()=>{class a{get BalanceCard$(){return this._BalanceCard.asObservable()}constructor(e){this._httpClient=e,this._BalanceCard=new O.X(null)}create_BalanceCard(e){return this._httpClient.post(`${T.N.API_ENDPOINT+N.b.balance_card.create_balance_card}`,{...e})}uploadImage(e){let n=new FormData;n.append("image",e);let d=(new F.LE).set("folder","blance_card");return this._httpClient.post(`${T.N.API_ENDPOINT+N.b.upload_file.upload_file}`,n,{params:d}).pipe((0,E.U)(Z=>{if(console.log("Uploading image response: ",Z),Z.success)return Z.data[0]}))}get_balance_card(){return this._httpClient.get(`${T.N.API_ENDPOINT+N.b.balance_card.all_balance_card}`).pipe((0,E.U)(n=>{if(n.code=200){const o=n.data[0];return this._BalanceCard.next(o),o}}))}static#t=this.\u0275fac=function(n){return new(n||a)(t.LFG(F.eN))};static#e=this.\u0275prov=t.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"})}return a})();var _=r(1993);function U(a,c){if(1&a){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",17)(2,"button",18),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.addTransateMode())}),t._uU(3),t.qZA()(),t.BQk()}2&a&&(t.xp6(3),t.hij(" ","Add Translate"," "))}function w(a,c){if(1&a&&(t.TgZ(0,"mat-option",22)(1,"span",23),t._uU(2),t.qZA()()),2&a){const e=c.$implicit;t.Q6J("value",e.lang_code),t.xp6(2),t.Oqu(e.language_name)}}function S(a,c){if(1&a&&(t.ynx(0),t.TgZ(1,"div",19)(2,"mat-form-field",6)(3,"mat-label"),t._uU(4),t.qZA(),t.TgZ(5,"mat-select",20),t.YNc(6,w,3,2,"mat-option",21),t.qZA()()(),t.BQk()),2&a){const e=t.oxw();t.xp6(4),t.Oqu("Select Language"),t.xp6(1),t.Q6J("formControlName","lang_code"),t.xp6(1),t.Q6J("ngForOf",e.languages)}}function M(a,c){if(1&a&&(t.TgZ(0,"mat-option",22)(1,"span",23),t._uU(2),t.qZA()()),2&a){const e=c.$implicit;t.Q6J("value",e),t.xp6(2),t.Oqu(e)}}function P(a,c){if(1&a&&(t.ynx(0),t.TgZ(1,"div",19)(2,"mat-form-field",6)(3,"mat-label"),t._uU(4),t.qZA(),t.TgZ(5,"mat-select",20),t.YNc(6,M,3,2,"mat-option",21),t.qZA()()(),t.BQk()),2&a){const e=t.oxw();t.xp6(4),t.Oqu("Status"),t.xp6(1),t.Q6J("formControlName","status"),t.xp6(1),t.Q6J("ngForOf",e.statustypes)}}function L(a,c){1&a&&(t.ynx(0),t.TgZ(1,"mat-form-field",6)(2,"mat-label"),t._uU(3),t.qZA(),t._UZ(4,"input",24),t.qZA(),t.BQk()),2&a&&(t.xp6(3),t.Oqu("Maximum Limit for normal user "),t.xp6(1),t.Q6J("formControlName","maximum_purchase_limit"))}function D(a,c){if(1&a){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",44)(2,"mat-form-field",45)(3,"mat-label"),t._uU(4),t.qZA(),t._UZ(5,"input",46),t.TgZ(6,"button",47),t.NdJ("click",function(){const d=t.CHM(e).index,I=t.oxw(2);return t.KtG(I.removeAamountsValue(d))}),t._UZ(7,"mat-icon",31),t.qZA()()(),t.BQk()}if(2&a){const e=c.index;t.xp6(1),t.Q6J("formGroupName",e),t.xp6(3),t.Oqu(" Value :"+(e+1)),t.xp6(1),t.Q6J("formControlName","amount"),t.xp6(2),t.Q6J("svgIcon","mat_outline:delete_outline")}}function V(a,c){if(1&a){const e=t.EpF();t.TgZ(0,"button",48),t.NdJ("click",function(o){return t.CHM(e),t.oxw(2).removeAvatar(),t.KtG(o.stopPropagation())}),t._UZ(1,"mat-icon",49),t.qZA()}if(2&a){const e=t.oxw(2);t.Q6J("disabled",e.BalanceCardForm.disabled),t.xp6(1),t.Q6J("svgIcon","heroicons_outline:trash")}}function j(a,c){1&a&&t._UZ(0,"img",50)}function R(a,c){if(1&a&&t._UZ(0,"img",51),2&a){const e=t.oxw(2);t.Q6J("src",e.imageSrc,t.LSH)}}function K(a,c){if(1&a){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",25),t.ynx(2,26),t.TgZ(3,"div",27)(4,"div",28)(5,"div",29)(6,"button",30),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.addAamountsValue())}),t._UZ(7,"mat-icon",31),t.qZA(),t.TgZ(8,"span",32),t._uU(9,"Add New Amount Value"),t.qZA()(),t.TgZ(10,"div",33),t.YNc(11,D,8,4,"ng-container",34),t.qZA()()(),t.BQk(),t.ynx(12),t.TgZ(13,"div",35)(14,"p",36),t._uU(15),t.qZA(),t.TgZ(16,"div",37),t.YNc(17,V,2,2,"button",38),t.YNc(18,j,1,0,"img",39),t.YNc(19,R,1,1,"img",40),t.TgZ(20,"div")(21,"input",41,42),t.NdJ("change",function(){t.CHM(e);const o=t.MAs(23),d=t.oxw();return t.KtG(d.uploadAvatar(o.files))}),t.qZA()(),t.TgZ(24,"button",43),t.NdJ("click",function(){t.CHM(e);const o=t.MAs(22);return t.KtG(o.click())}),t._uU(25),t.qZA()()(),t.BQk(),t.qZA(),t.BQk()}if(2&a){const e=t.oxw();let n;t.xp6(7),t.Q6J("svgIcon","mat_solid:add_box"),t.xp6(4),t.Q6J("ngForOf",null==(n=e.BalanceCardForm.get("amounts"))?null:n.controls),t.xp6(4),t.hij(" ","Gift Card Logo *"," "),t.xp6(2),t.Q6J("ngIf",e.imageSrc),t.xp6(1),t.Q6J("ngIf",!e.imageSrc),t.xp6(1),t.Q6J("ngIf",e.imageSrc),t.xp6(2),t.Q6J("multiple",!1)("disabled",e.BalanceCardForm.disabled)("accept","image/jpeg, image/png"),t.xp6(3),t.Q6J("disabled",e.BalanceCardForm.disabled),t.xp6(1),t.hij(" ","Select Image"," ")}}function G(a,c){1&a&&(t.ynx(0),t.TgZ(1,"button",52),t._uU(2),t.qZA(),t.BQk()),2&a&&(t.xp6(2),t.hij(" ","cance"," "))}function Y(a,c){if(1&a){const e=t.EpF();t.ynx(0),t.TgZ(1,"button",53),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.backModeAdd())}),t._uU(2),t.qZA(),t.BQk()}2&a&&(t.xp6(2),t.hij(" ","Back"," "))}function $(a,c){1&a&&t._UZ(0,"mat-progress-spinner",54),2&a&&t.Q6J("diameter",24)("mode","indeterminate")}const v=function(a){return{"border rounded border-warn":a}},W=[{path:"",component:(()=>{class a{constructor(){this.imageSrc=null,this.ImageFile=null,this.isLoading=!0,this.BalanceCard=null,this.mode="add",this.languages=[],this.statustypes=["active","inActive"],this.toast=B().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:4e3}),this._formBuilder=(0,t.f3M)(i.QS),this.destroyRef=(0,t.f3M)(t.ktI),this._blanceService=(0,t.f3M)(q),this.LangTransatedService=(0,t.f3M)(y.A),this.quillModules={toolbar:[[{color:["#000000","#eab308","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"]}],[{background:["#000000","#eab308","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"]}],["bold","italic","underline"],[{align:[]},{list:"ordered"},{list:"bullet"}],["clean"],["blockquote","code-block"],["bold","italic","underline","strike"],["code-block"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{direction:"rtl"}],[{size:["small",!1,"large","huge"]}],[{header:[1,2,3,4,5,6,!1]}],[{font:[]}],["clean"],["link","image","video"]]}}ngOnInit(){this.BalanceCardForm=this._formBuilder.group({card_name:["",[i.kI.required]],card_logo:["",[]],lang_code:["En"],type:["balance_card"],status:["active",[i.kI.required]],card_about:["",[i.kI.required]],maximum_purchase_limit:["",[i.kI.required]],how_to_redeem:["",[i.kI.required]],terms_condition:["",[i.kI.required]],card_description:["",[i.kI.required]],amounts:this._formBuilder.array([])}),this._blanceService.get_balance_card().subscribe(),this._blanceService.BalanceCard$.pipe((0,_.sL)(this.destroyRef),(0,J.b)(e=>{this.BalanceCard=e,console.log("balance card loaded",e),this.BalanceCardForm.patchValue(e),this.imageSrc=this.BalanceCardForm.get("card_logo").value,e?.amounts?(this.clearAamountsValue(),e.amounts.forEach(n=>{this.addAamountsValue(n)})):this.addAamountsValue(),this.isLoading=!1})).subscribe()}addTransateMode(){this.LangTransatedService.getLanguages().pipe((0,_.sL)(this.destroyRef)).subscribe({next:e=>{this.languages=e,this.mode="transate"},error:e=>{this.toast.fire({icon:"error",title:"somthing error !"})},complete:()=>{}})}backModeAdd(){this.mode="add"}addAamountsValue(e){this.BalanceCardForm.get("amounts").push(this.createAamountsValueControl(e))}createAamountsValueControl(e){return this._formBuilder.group({amount:[e?e.amount:"",[i.kI.required]]})}removeAamountsValue(e){const n=this.BalanceCardForm.get("amounts");n.at(e),n.removeAt(e)}clearAamountsValue(){this.BalanceCardForm.get("amounts").clear()}isEditorContentInvalid(e){const n=this.BalanceCardForm.get(e);return n.invalid&&(n.dirty||n.touched)}submit(){if(!this.BalanceCardForm.invalid){if("add"===this.mode&&!this.imageSrc)return void this.toast.fire({icon:"warning",text:"Ensure that there are no blank fields ! "});"add"===this.mode&&this.imageSrc&&this.ImageFile?(this.submitDataWithNewImage(),console.log("submitDataWithNewImage")):"add"===this.mode&&this.imageSrc&&!this.ImageFile?(console.log("run submitWithOriginalImage"),this.submitWithOriginalImage()):"transate"===this.mode&&this.submitWithOriginalImage()}}submitDataWithNewImage(){this.BalanceCardForm.disable(),this._blanceService.uploadImage(this.ImageFile).pipe((0,_.sL)(this.destroyRef),(0,Q.w)(n=>{console.log("Uploading image switched ",n),this.BalanceCardForm.get("card_logo").setValue(n);const o={...this.BalanceCardForm.value};return console.log("paylaod: ",o),this._blanceService.create_BalanceCard(o)})).subscribe({next:n=>{this.toast.fire({icon:"success",title:"Success Update BalanceCard"}),this.BalanceCardForm.enable(),this._blanceService.get_balance_card().pipe((0,_.sL)(this.destroyRef)).subscribe()},error:n=>{this.toast.fire({icon:"error",title:n.error?.message}),this.BalanceCardForm.enable(),console.error("Error occurred:",n)}})}submitWithOriginalImage(){this.BalanceCardForm.disable();const e={...this.BalanceCardForm.value};this._blanceService.create_BalanceCard(e).pipe((0,_.sL)(this.destroyRef),(0,Q.w)(()=>(this.BalanceCardForm.enable(),this._blanceService.get_balance_card()))).subscribe({next:n=>{this.toast.fire("add"===this.mode?{icon:"success",title:"Success Update BalanceCard"}:{icon:"success",title:"Success Add BalanceCard Translation"})},error:n=>{this.toast.fire({icon:"error",title:"somthing error"}),this.BalanceCardForm.enable()}})}removeAvatar(){this.imageSrc=null,this.ImageFile=null}uploadAvatar(e){if(!e.length)return;const o=e[0];if(!["image/jpeg","image/png"].includes(o.type))return;const d=new FileReader;d.readAsDataURL(o),d.onload=()=>{this.imageSrc=d.result},this.ImageFile=o}static#t=this.\u0275fac=function(n){return new(n||a)};static#e=this.\u0275cmp=t.Xpm({type:a,selectors:[["app-balance-card"]],standalone:!0,features:[t.jDz],decls:44,vars:45,consts:[[1,"relative","inset-0","min-w-0","overflow-y-auto","p-0","w-full","bg-card","min-h-screen","rounded-md","mb-12"],[1,"flex-auto","pt-5","pb-5","md:px-8","lg:px-12","grid","sm:grid-cols-2","gap-x-6","w-full"],[4,"ngIf"],[1,"sm:col-span-2","px-2","h-full"],[1,"w-full"],[1,"w-full",3,"formGroup"],[1,"fuse-mat-no-subscript","w-full"],["matInput","","placeholder","Gift Card Name",3,"formControlName"],[1,""],[1,"font-semibold","text-default"],["aria-hidden","true",1,"mat-mdc-form-field-required-marker","mdc-floating-label--required"],["placeholder","card about",1,"mt-2","w-full",3,"ngClass","required","formControlName","bounds","modules"],[1,"mt-2","w-full",3,"ngClass","required","formControlName","bounds","modules"],[1,"mt-2","w-full",3,"required","ngClass","formControlName","bounds","modules"],[1,"w-full","flex","items-center","justify-center","sm:justify-end","px-6","pt-4","space-x-3"],["type","button","mat-flat-button","","color","primary",1,"px-8",3,"disabled","click"],[3,"diameter","mode",4,"ngIf"],[1,"sm:col-span-2","w-full","flex","justify-end"],["mat-flat-button","","type","button","color","primary",1,"px-8","rounded-lg",3,"click"],[1,"sm:col-span-2"],[3,"formControlName"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"ml-3"],["matInput","","type","number","placeholder","Gift Card Name",3,"formControlName"],[1,"grid","sm:grid-cols-2","gap-6","w-full"],["formArrayName","amounts"],[1,"sm:col-span-1"],[1,"flex","flex-col"],[1,"flex","items-center"],["mat-icon-button","","type","button",3,"click"],[1,"icon-size-5",3,"svgIcon"],[1,"leading-none"],[1,"grid","sm:grid-cols-1","gap-x-4","w-full"],[4,"ngFor","ngForOf"],[1,"sm:col-span-1","flex","flex-col","justify-end","items-end","min-w-70","min-h-50","max-w-70","max-h-max"],[1,"text-xl","font-semibold","my-2","text-default","text-center","block","w-full"],[1,"bg-default","flex","flex-col","justify-center","items-center","px-4","py-4","w-full","max-h-max"],["mat-icon-button","","class","flex items-center justify-center w-10 h-10 rounded-full cursor-pointer hover:bg-hover","matRipple","",3,"disabled","click",4,"ngIf"],["src","assets/images/image-upload.svg","alt","img","srcset","","class","block min-w-70 min-h-40 max-w-70 max-h-40 object-contain",4,"ngIf"],["alt","img","srcset","","class","block min-w-70 min-h-40 max-w-70 max-h-40 object-contain",3,"src",4,"ngIf"],["id","avatar-file-input","type","file",1,"absolute","h-0","w-0","opacity-0","invisible","pointer-events-none",3,"multiple","disabled","accept","change"],["img_banner","","avatarFileInput",""],["mat-flat-button","",1,"block","bg-[#FFF9C4]","text-black","my-3","px-4","py-2",3,"disabled","click"],[1,"sm:col-span-1",3,"formGroupName"],[1,"fuse-mat-no-subscript","w-full","fuse-mat-emphasized-affix"],["type","number","matInput","","placeholder","amount Value",3,"formControlName"],["mat-icon-button","","type","button","matSuffix","",3,"click"],["mat-icon-button","","matRipple","",1,"flex","items-center","justify-center","w-10","h-10","rounded-full","cursor-pointer","hover:bg-hover",3,"disabled","click"],[1,"text-red-500",3,"svgIcon"],["src","assets/images/image-upload.svg","alt","img","srcset","",1,"block","min-w-70","min-h-40","max-w-70","max-h-40","object-contain"],["alt","img","srcset","",1,"block","min-w-70","min-h-40","max-w-70","max-h-40","object-contain",3,"src"],["mat-stroked-button",""],["mat-stroked-button","","type","button",3,"click"],[3,"diameter","mode"]],template:function(n,o){1&n&&(t.TgZ(0,"div",0)(1,"div",1),t.YNc(2,U,4,1,"ng-container",2),t.TgZ(3,"div",3)(4,"div",4)(5,"form",5),t.YNc(6,S,7,3,"ng-container",2),t.ynx(7),t.TgZ(8,"mat-form-field",6)(9,"mat-label"),t._uU(10),t.qZA(),t._UZ(11,"input",7),t.qZA(),t.BQk(),t.YNc(12,P,7,3,"ng-container",2),t.YNc(13,L,5,2,"ng-container",2),t.YNc(14,K,26,11,"ng-container",2),t.ynx(15),t.TgZ(16,"div",8)(17,"mat-label",9),t._uU(18),t.qZA(),t._UZ(19,"span",10)(20,"quill-editor",11),t.qZA(),t.BQk(),t.ynx(21),t.TgZ(22,"mat-label",9),t._uU(23),t.qZA(),t._UZ(24,"span",10)(25,"quill-editor",12),t.BQk(),t.ynx(26),t.TgZ(27,"mat-label",9),t._uU(28),t.qZA(),t._UZ(29,"span",10)(30,"quill-editor",13),t.BQk(),t.ynx(31),t.TgZ(32,"mat-label",9),t._uU(33),t.qZA(),t._UZ(34,"span",10)(35,"quill-editor",13),t.BQk(),t.ynx(36),t.TgZ(37,"div",14),t.YNc(38,G,3,1,"ng-container",2),t.YNc(39,Y,3,1,"ng-container",2),t.ynx(40),t.TgZ(41,"button",15),t.NdJ("click",function(){return o.submit()}),t.YNc(42,$,1,2,"mat-progress-spinner",16),t._uU(43),t.qZA(),t.BQk(),t.qZA(),t.BQk(),t.qZA()()()()()),2&n&&(t.xp6(2),t.Q6J("ngIf","add"==o.mode),t.xp6(3),t.Q6J("formGroup",o.BalanceCardForm),t.xp6(1),t.Q6J("ngIf","transate"==o.mode),t.xp6(4),t.Oqu("Gift Card Name "),t.xp6(1),t.Q6J("formControlName","card_name"),t.xp6(1),t.Q6J("ngIf","add"==o.mode),t.xp6(1),t.Q6J("ngIf","add"==o.mode),t.xp6(1),t.Q6J("ngIf","add"==o.mode),t.xp6(4),t.Oqu("Card About "),t.xp6(2),t.Q6J("ngClass",t.VKq(37,v,o.isEditorContentInvalid("card_about")))("required",!0)("formControlName","card_about")("bounds","self")("modules",o.quillModules),t.xp6(3),t.Oqu("Description "),t.xp6(2),t.Q6J("ngClass",t.VKq(39,v,o.isEditorContentInvalid("card_description")))("required",!0)("formControlName","card_description")("bounds","self")("modules",o.quillModules),t.xp6(3),t.Oqu("terms condition"),t.xp6(2),t.Q6J("required",!0)("ngClass",t.VKq(41,v,o.isEditorContentInvalid("terms_condition")))("formControlName","terms_condition")("bounds","self")("modules",o.quillModules),t.xp6(3),t.Oqu("how to redeem"),t.xp6(2),t.Q6J("required",!0)("ngClass",t.VKq(43,v,o.isEditorContentInvalid("how_to_redeem")))("formControlName","how_to_redeem")("bounds","self")("modules",o.quillModules),t.xp6(3),t.Q6J("ngIf","add"===o.mode),t.xp6(1),t.Q6J("ngIf","transate"===o.mode),t.xp6(2),t.Q6J("disabled",o.BalanceCardForm.invalid||!o.imageSrc),t.xp6(1),t.Q6J("ngIf",o.BalanceCardForm.disabled),t.xp6(1),t.hij(" ","Save"," "))},dependencies:[p.O5,p.ax,p.mk,s.Ps,s.Hw,l.ot,l.lW,l.RK,b.lN,b.KE,b.hX,b.R9,i.u5,i._Y,i.Fj,i.wV,i.JJ,i.JL,i.Q7,i.UX,i.sg,i.u,i.x0,i.CE,u.c,u.Nt,f.si,f.wG,A.AV,g.LD,g.gD,f.ey,f.Ng,m.Cq,m.Ou,C.g6]})}return a})()}]},8699:(k,h,r)=>{r.d(h,{A:()=>A});var t=r(553),p=r(5619),i=r(7398),m=r(3074),f=r(9862),g=r(5879);let A=(()=>{class u{get langs$(){return this._langs.asObservable()}constructor(l){this._httpClient=l,this._langs=new p.X(null)}getLanguages(){let l=t.N.API_ENDPOINT+m.b.TRANSLATE.all_languages;const s=(new f.LE).set("page",-1);return this._httpClient.get(`${l}`,{params:s}).pipe((0,i.U)(C=>{if(C.success){const x=C.data.filter(B=>"active"===B.status);return this._langs.next(x),x}}))}translateColor(l){return this._httpClient.post(`${t.N.API_ENDPOINT+m.b.TRANSLATE.create_color_translate}`,{...l})}translateCategory(l){return this._httpClient.post(`${t.N.API_ENDPOINT+m.b.TRANSLATE.create_category_translate}`,{...l})}translateBrand(l){return this._httpClient.post(`${t.N.API_ENDPOINT+m.b.TRANSLATE.create_brand_translate}`,{...l})}product_translation(l){return this._httpClient.post(`${t.N.API_ENDPOINT+m.b.TRANSLATE.create_product_translation}`,{...l})}copon_translate(l){return this._httpClient.post(`${t.N.API_ENDPOINT+m.b.TRANSLATE.create_copon_translate}`,{...l})}referralProgram_translate(l){return this._httpClient.post(`${t.N.API_ENDPOINT+m.b.TRANSLATE.create_referralProgram_translate}`,{...l})}static#t=this.\u0275fac=function(s){return new(s||u)(g.LFG(f.eN))};static#e=this.\u0275prov=g.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"})}return u})()}}]);