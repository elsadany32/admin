"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[7903],{7903:(_t,f,a)=>{a.r(f),a.d(f,{default:()=>gt});var p=a(6814),c=a(6223),x=a(2296),T=a(3680),y=a(7700),C=a(617),v=a(4516),u=a(1476),b=a(8525),s=a(5313),A=a(2596),S=a(5742),U=a(4553),I=a(53),N=a(2948),Q=a(8645),j=a(2572),r=a(9397),g=a(3997),Z=a(7921),_=a(9773),Y=a(4664),D=a(6306),w=a(2096),z=a(836),t=a(5879),J=a(8271),k=a(2787),d=a(1043);function B(e,i){if(1&e&&(t.TgZ(0,"mat-option",16)(1,"span",17),t._uU(2),t.qZA()()),2&e){const n=i.$implicit;t.Q6J("value",n.value),t.xp6(2),t.Oqu(n.name)}}function $(e,i){1&e&&(t.TgZ(0,"th",36),t._uU(1),t.qZA()),2&e&&(t.xp6(1),t.hij(" ","S.No"," "))}function O(e,i){if(1&e&&(t.TgZ(0,"td",37)(1,"span",38),t._uU(2),t.qZA()()),2&e){const n=i.index,o=t.oxw(3);t.xp6(2),t.hij(" ",n+1+o.pageIndex*o.pageSize," ")}}function L(e,i){1&e&&(t.TgZ(0,"th",36),t._uU(1),t.qZA()),2&e&&(t.xp6(1),t.hij(" ","Ticket ID"," "))}function R(e,i){if(1&e&&(t.TgZ(0,"td",37),t._uU(1),t.qZA()),2&e){const n=i.$implicit;t.xp6(1),t.hij(" ",null==n?null:n.ticket_id," ")}}function F(e,i){1&e&&(t.TgZ(0,"th",36),t._uU(1),t.qZA()),2&e&&(t.xp6(1),t.hij(" ","Full Name"," "))}function E(e,i){if(1&e&&(t.TgZ(0,"td",37),t._uU(1),t.qZA()),2&e){const n=i.$implicit;t.xp6(1),t.hij(" ",null==n?null:n.name," ")}}function H(e,i){1&e&&(t.TgZ(0,"th",39),t._uU(1),t.qZA()),2&e&&(t.xp6(1),t.hij(" ","Email/Phone"," "))}function M(e,i){if(1&e&&(t.TgZ(0,"td",40),t._uU(1),t.TgZ(2,"span",41),t._uU(3),t.qZA()()),2&e){const n=i.$implicit;t.xp6(1),t.hij(" ",null==n?null:n.email," "),t.xp6(2),t.hij(" ",null==n?null:n.phone,"")}}function P(e,i){1&e&&(t.TgZ(0,"th",36),t._uU(1),t.qZA()),2&e&&(t.xp6(1),t.hij(" ","Subject"," "))}function q(e,i){if(1&e&&(t.TgZ(0,"td",37)(1,"span",42),t._uU(2),t.qZA()()),2&e){const n=i.$implicit;t.xp6(2),t.Oqu(null==n?null:n.subject)}}function W(e,i){1&e&&(t.TgZ(0,"th",36),t._uU(1),t.qZA()),2&e&&(t.xp6(1),t.hij(" ","Status"," "))}function G(e,i){if(1&e&&(t.ynx(0),t.TgZ(1,"span",43),t._uU(2),t.qZA(),t.BQk()),2&e){const n=t.oxw().$implicit;t.xp6(2),t.hij(" ",null==n?null:n.status,"")}}function K(e,i){if(1&e&&(t.ynx(0),t.TgZ(1,"span",44),t._uU(2),t.qZA(),t.BQk()),2&e){const n=t.oxw().$implicit;t.xp6(2),t.hij(" ",null==n?null:n.status,"")}}function X(e,i){if(1&e&&(t.ynx(0),t.TgZ(1,"span",45),t._uU(2),t.qZA(),t.BQk()),2&e){const n=t.oxw().$implicit;t.xp6(2),t.hij(" ",null==n?null:n.status,"")}}function V(e,i){if(1&e&&(t.TgZ(0,"td",37),t.YNc(1,G,3,1,"ng-container",14),t.YNc(2,K,3,1,"ng-container",14),t.YNc(3,X,3,1,"ng-container",14),t.qZA()),2&e){const n=i.$implicit;t.xp6(1),t.Q6J("ngIf","open"===(null==n?null:n.status)),t.xp6(1),t.Q6J("ngIf","closed"===(null==n?null:n.status)),t.xp6(1),t.Q6J("ngIf","pending"===(null==n?null:n.status))}}function tt(e,i){1&e&&(t.TgZ(0,"th",36),t._uU(1),t.qZA()),2&e&&(t.xp6(1),t.hij(" ","Create Date"," "))}function et(e,i){if(1&e&&(t.TgZ(0,"td",37)(1,"span",46),t._uU(2),t.ALo(3,"date"),t.qZA()()),2&e){const n=i.$implicit;t.xp6(2),t.hij(" ",t.Dn7(3,1,n.createdAt,"dd MMM yyyy, hh:mm a","UTC")," ")}}function nt(e,i){1&e&&(t.TgZ(0,"th",36),t._uU(1),t.qZA()),2&e&&(t.xp6(1),t.hij(" ","last Updated"," "))}function it(e,i){if(1&e&&(t.TgZ(0,"td",37)(1,"span",46),t._uU(2),t.ALo(3,"date"),t.qZA()()),2&e){const n=i.$implicit;t.xp6(2),t.hij(" ",t.xi3(3,1,n.updatedAt,"dd MMM yyyy, hh:mm a")," ")}}function at(e,i){1&e&&(t.TgZ(0,"th",47),t._uU(1),t.qZA()),2&e&&(t.xp6(1),t.hij(" ","Action"," "))}function ot(e,i){if(1&e){const n=t.EpF();t.TgZ(0,"td",37)(1,"button",48),t.NdJ("click",function(){const m=t.CHM(n).$implicit,h=t.oxw(3);return t.KtG(h.viewItem(m._id))}),t._UZ(2,"mat-icon",49),t.qZA()()}2&e&&(t.xp6(2),t.Q6J("svgIcon","heroicons_solid:eye"))}function lt(e,i){1&e&&t._UZ(0,"tr",50)}function st(e,i){1&e&&t._UZ(0,"tr",51)}function ct(e,i){if(1&e&&(t.TgZ(0,"table",19),t.ynx(1,20),t.YNc(2,$,2,1,"th",21),t.YNc(3,O,3,1,"td",22),t.BQk(),t.ynx(4,23),t.YNc(5,L,2,1,"th",21),t.YNc(6,R,2,1,"td",22),t.BQk(),t.ynx(7,24),t.YNc(8,F,2,1,"th",21),t.YNc(9,E,2,1,"td",22),t.BQk(),t.ynx(10,25),t.YNc(11,H,2,1,"th",26),t.YNc(12,M,4,2,"td",27),t.BQk(),t.ynx(13,28),t.YNc(14,P,2,1,"th",21),t.YNc(15,q,3,1,"td",22),t.BQk(),t.ynx(16,29),t.YNc(17,W,2,1,"th",21),t.YNc(18,V,4,3,"td",22),t.BQk(),t.ynx(19,30),t.YNc(20,tt,2,1,"th",21),t.YNc(21,et,4,5,"td",22),t.BQk(),t.ynx(22,31),t.YNc(23,nt,2,1,"th",21),t.YNc(24,it,4,4,"td",22),t.BQk(),t.ynx(25,32),t.YNc(26,at,2,1,"th",33),t.YNc(27,ot,3,1,"td",22),t.BQk(),t.YNc(28,lt,1,0,"tr",34),t.YNc(29,st,1,0,"tr",35),t.qZA()),2&e){const n=t.oxw(2);t.Q6J("dataSource",n.data),t.xp6(28),t.Q6J("matHeaderRowDef",n.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",n.displayedColumns)}}function mt(e,i){if(1&e&&(t.ynx(0),t.YNc(1,ct,30,3,"table",18),t.BQk()),2&e){const n=t.oxw();t.xp6(1),t.Q6J("ngIf",!n.isLoading)}}function pt(e,i){if(1&e&&(t.ynx(0),t._UZ(1,"app-loading-skeltons",52),t.BQk()),2&e){const n=t.oxw();t.xp6(1),t.Q6J("skeltonType",n.skletonTable)}}function ut(e,i){1&e&&(t.ynx(0),t._UZ(1,"app-empty-state",53),t.BQk()),2&e&&(t.xp6(1),t.Q6J("isSvgImage",!1)("stateTitle","THERE IS NO RESUIT"))}const rt=function(e,i){return{"pointer-events-none":e,hidden:i}},gt=[{path:"",component:(()=>{class e{constructor(n,o,l){this._ContactUsService=n,this._router=o,this.ActivatedRoute=l,this.searchInputControl=new c.p4,this.StatusInput=new c.p4("open ,pending"),this._unsubscribeAll=new Q.x,this.total_recoreds=0,this.pageIndex=0,this.pageSize=10,this.pageSizeOptions=[10,20,50,100],this.skletonTable=N.q.TABLE,this.tiackes_status=[{value:"open ,pending",name:"Active Tickets"},{value:"closed",name:"Archived Tickets"},{value:"",name:"All Tickets"}],this.data=[],this.isLoading=!0,this.displayedColumns=["S_No","Full_name","Email","phone","subject","status","Create_date","updatedAt","Action"]}ngOnInit(){(0,j.a)([this._ContactUsService.pagination$.pipe((0,r.b)(n=>{console.log("data pagination$ !",n),this.pageIndex=n.pageIndex,this.pageSize=n.pageSize}),(0,g.x)((n,o)=>n.pageIndex===o.pageIndex&&n.pageSize===o.pageSize)),this.StatusInput.valueChanges.pipe((0,Z.O)("open ,pending"),(0,g.x)()),this.searchInputControl.valueChanges.pipe((0,Z.O)(""),(0,g.x)())]).pipe((0,_.R)(this._unsubscribeAll),(0,Y.w)(([n,o,l])=>(this.isLoading=!0,this._ContactUsService.getTickets(n?.pageIndex,n?.pageSize,o,l))),(0,D.K)(n=>(this.isLoading=!1,(0,w.of)(n)))).subscribe(),this.ActivatedRoute.queryParams.subscribe(n=>{if(console.log("parms subscribe",n),0!==Object.keys(n).length)this.searchInputControl.setValue(n.emailPhoneSearch),console.log("searchInputControl",this.searchInputControl.value),this.StatusInput.setValue("");else{let o={pageIndex:0,pageSize:10,length:0};console.log("test"),this._ContactUsService.updatePagination$(o)}}),this._ContactUsService.tickets$.pipe((0,_.R)(this._unsubscribeAll),(0,z.T)(1),(0,r.b)(n=>{console.log("loading data !",n),this.data=n,this.isLoading=!1})).subscribe(),this._ContactUsService.pagination$.pipe((0,_.R)(this._unsubscribeAll),(0,r.b)(n=>{this._paginator.length=n.length,this.total_recoreds=n.length,this._paginator.pageIndex=n.pageIndex,this._paginator.pageSize=n.pageSize})).subscribe()}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}pageChange(n){console.log("page changed",n),this._ContactUsService.updatePagination$(n)}viewItem(n){this._router.navigate(["./contact-us/tickets/ticket"],{queryParams:{email:n}})}userDetais(n){this._router.navigate(["./user-details"],{})}static#t=this.\u0275fac=function(o){return new(o||e)(t.Y36(J.D),t.Y36(k.F0),t.Y36(k.gz))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-tickets"]],viewQuery:function(o,l){if(1&o&&t.Gf(u.NW,7),2&o){let m;t.iGM(m=t.CRH())&&(l._paginator=m.first)}},standalone:!0,features:[t.jDz],decls:24,vars:16,consts:[[1,"h-full","max-h-max","max-w-full","min-w-max","w-full","pt-9","pb-9","md:px-8","lg:px-12","mx-auto"],[1,"rounded-lg","flex","flex-col","bg-card","h-full","min-w-max","mx-auto"],[1,"w-full","px-6","pt-10","pb-4","border-b","flex","justify-between"],[1,"text-2xl","font-semibold"],[1,"relative","flex","flex-col","sm:flex-row","flex-0","sm:items-end","sm:justify-between","py-2","px-6","md:px-8","border-b"],[1,"flex","w-full","flex-row","sm:flex-row","sm:items-end","gap-x-4"],[1,"w-full","md:w-1/3"],[3,"formControl"],[3,"value",4,"ngFor","ngForOf"],[1,"w-full","md:w-1/2"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["matInput","","placeholder","search ...",3,"formControl","autocomplete"],[1,"flex","flex-col","flex-auto"],[1,"flex","flex-col","w-full","h-full","max-h-max","max-w-full"],[4,"ngIf"],[1,"border-t","rounded-b-lg",3,"ngClass","pageSize","pageSizeOptions","showFirstLastButtons","page"],[3,"value"],[1,"ml-3"],["mat-table","","class","custom-table max-w-full",3,"dataSource",4,"ngIf"],["mat-table","",1,"custom-table","max-w-full",3,"dataSource"],["matColumnDef","S_No"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","phone"],["matColumnDef","Full_name"],["matColumnDef","Email"],["class","hidden sm:table-cell","mat-header-cell","",4,"matHeaderCellDef"],["class","hidden sm:table-cell","mat-cell","",4,"matCellDef"],["matColumnDef","subject"],["matColumnDef","status"],["matColumnDef","Create_date"],["matColumnDef","updatedAt"],["matColumnDef","Action"],["mat-header-cell","","class","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["class","hover:bg-hover cursor-pointer","mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],[1,"font-medium","text-sm","text-secondary","whitespace-nowrap"],["mat-header-cell","",1,"hidden","sm:table-cell"],["mat-cell","",1,"hidden","sm:table-cell"],[1,"block","text-center"],[1,"max-w-24","text-ellipsis","overflow-hidden","inline-block"],[1,"px-2","py-1","rounded","bg-green-600"],[1,"px-2","bg-warn-700","py-1","rounded"],[1,"px-2","bg-primary","py-1","rounded","text-gray-900"],[1,"pr-6","whitespace-nowrap"],["mat-header-cell","",1,""],["mat-icon-button","",3,"click"],[1,"text-green-400","icon-size-5",3,"svgIcon"],["mat-header-row",""],["mat-row","",1,"hover:bg-hover","cursor-pointer"],[3,"skeltonType"],["stateIcon","heroicons_outline:information-circle",1,"bg-card","rounded-lg",3,"isSvgImage","stateTitle"]],template:function(o,l){1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2",3),t._uU(4),t.qZA()(),t.TgZ(5,"div",4)(6,"div",5)(7,"mat-form-field",6)(8,"mat-label"),t._uU(9,"Select Status"),t.qZA(),t.TgZ(10,"mat-select",7),t.YNc(11,B,3,2,"mat-option",8),t.qZA()(),t.TgZ(12,"mat-form-field",9)(13,"mat-label"),t._uU(14,"Search by Email"),t.qZA(),t._UZ(15,"mat-icon",10)(16,"input",11),t.qZA()()(),t.TgZ(17,"div",12)(18,"div",13),t.YNc(19,mt,2,1,"ng-container",14),t.YNc(20,pt,2,1,"ng-container",14),t.ynx(21),t.TgZ(22,"mat-paginator",15),t.NdJ("page",function(h){return l.pageChange(h)}),t.qZA(),t.BQk(),t.YNc(23,ut,2,2,"ng-container",14),t.qZA()()()()),2&o&&(t.xp6(4),t.hij(" Total Records : ",l.total_recoreds," "),t.xp6(6),t.Q6J("formControl",l.StatusInput),t.xp6(1),t.Q6J("ngForOf",l.tiackes_status),t.xp6(4),t.Q6J("svgIcon","heroicons_solid:search"),t.xp6(1),t.Q6J("formControl",l.searchInputControl)("autocomplete","true"),t.xp6(3),t.Q6J("ngIf",l.data.length),t.xp6(1),t.Q6J("ngIf",l.isLoading),t.xp6(2),t.Q6J("ngClass",t.WLB(13,rt,l.isLoading,!l.data.length))("pageSize",l.pageSize)("pageSizeOptions",l.pageSizeOptions)("showFirstLastButtons",!0),t.xp6(1),t.Q6J("ngIf",!l.data.length&&!l.isLoading))},dependencies:[p.O5,p.ax,p.mk,p.uU,u.TU,u.NW,s.p0,s.BZ,s.fO,s.as,s.w1,s.Dz,s.nj,s.ge,s.ev,s.XQ,s.Gk,C.Ps,C.Hw,x.ot,x.RK,U.W,v.c,v.Nt,d.KE,d.hX,d.qo,c.UX,c.Fj,c.JJ,c.oH,b.LD,b.gD,T.ey,T.si,y.Is,I.vi,S.s,A.AV],styles:["app-tickets[_ngcontent-%COMP%]{display:flex;height:-moz-fit-content;height:fit-content;min-height:100vh;flex-direction:column}"]})}return e})()}]}}]);