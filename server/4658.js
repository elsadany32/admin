"use strict";exports.id=4658,exports.ids=[4658],exports.modules={62779:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{D:()=>ContactUsService});var _angular_common_http__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(93634),app_shared_constants_app_endpoints_constants__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(18075),environments_environment__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(56316),rxjs__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(2859),_angular_core__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(78371);let ContactUsService=(()=>{class ContactUsService2{constructor(_httpClient){this._httpClient=_httpClient,this._tickets=new rxjs__WEBPACK_IMPORTED_MODULE_2__.BehaviorSubject(null),this._All_tickets=new rxjs__WEBPACK_IMPORTED_MODULE_2__.BehaviorSubject(null),this._All_shortCuts=new rxjs__WEBPACK_IMPORTED_MODULE_2__.BehaviorSubject(null),this._ticketById=new rxjs__WEBPACK_IMPORTED_MODULE_2__.BehaviorSubject(null),this._pagination=new rxjs__WEBPACK_IMPORTED_MODULE_2__.BehaviorSubject({pageIndex:0,pageSize:10,length:0})}get pagination$(){return this._pagination.asObservable()}get tickets$(){return this._tickets.asObservable()}get all_tickets$(){return this._All_tickets.asObservable()}get all_shortcuts$(){return this._All_shortCuts.asObservable()}get ticketById$(){return this._ticketById.asObservable()}updatePagination$(page){this._pagination.next(page)}getTickets(page=0,limit=10,status="open ,pending",searchKey){console.log("status value",status);let pageAfterUpdate=page+1,url=environments_environment__WEBPACK_IMPORTED_MODULE_1__.N.API_ENDPOINT+app_shared_constants_app_endpoints_constants__WEBPACK_IMPORTED_MODULE_0__.b.TICKETS.all_tickets,params=(new _angular_common_http__WEBPACK_IMPORTED_MODULE_3__.LE).set("page",pageAfterUpdate).set("limit",limit);return searchKey&&(params=params.append("search",searchKey)),status&&(params=params.append("status",status)),this._httpClient.get(`${url}`,{params}).pipe((0,rxjs__WEBPACK_IMPORTED_MODULE_2__.map)(response=>{if(response.success){const data=response.data;return this._tickets.next(data),this._pagination.next({length:response.page_info.count,pageIndex:page,pageSize:limit}),data}}))}getAllTickets(status,searchKey){let url=environments_environment__WEBPACK_IMPORTED_MODULE_1__.N.API_ENDPOINT+app_shared_constants_app_endpoints_constants__WEBPACK_IMPORTED_MODULE_0__.b.TICKETS.all_tickets,params=(new _angular_common_http__WEBPACK_IMPORTED_MODULE_3__.LE).set("page",-1);return status&&(params=params.append("status",status)),searchKey&&(params=params.append("search",searchKey)),this._httpClient.get(`${url}`,{params}).pipe((0,rxjs__WEBPACK_IMPORTED_MODULE_2__.map)(response=>{if(response.success){const data=response.data;return this._All_tickets.next(data),data}}))}getTicketById(id){return this._httpClient.get(`${environments_environment__WEBPACK_IMPORTED_MODULE_1__.N.API_ENDPOINT+app_shared_constants_app_endpoints_constants__WEBPACK_IMPORTED_MODULE_0__.b.TICKETS.get_ticket}/${id}`).pipe((0,rxjs__WEBPACK_IMPORTED_MODULE_2__.map)(response=>{if(200==response.code){const data=response.data;return this._ticketById.next(data),data}}))}update_ticket_closed_ticket(id){return this._httpClient.put(`${environments_environment__WEBPACK_IMPORTED_MODULE_1__.N.API_ENDPOINT+app_shared_constants_app_endpoints_constants__WEBPACK_IMPORTED_MODULE_0__.b.TICKETS.update_ticket}/${id}`,{status:"closed"}).pipe((0,rxjs__WEBPACK_IMPORTED_MODULE_2__.map)(response=>{if(200==response.code)return response.data}))}delete_ticket(id){return this._httpClient.delete(`${environments_environment__WEBPACK_IMPORTED_MODULE_1__.N.API_ENDPOINT+app_shared_constants_app_endpoints_constants__WEBPACK_IMPORTED_MODULE_0__.b.TICKETS.delete_ticket}/${id}`).pipe((0,rxjs__WEBPACK_IMPORTED_MODULE_2__.tap)(()=>this._ticketById.next(null)))}delete_admin_reply(id){return this._httpClient.delete(`${environments_environment__WEBPACK_IMPORTED_MODULE_1__.N.API_ENDPOINT+app_shared_constants_app_endpoints_constants__WEBPACK_IMPORTED_MODULE_0__.b.TICKETS.delete_reply}/${id}`)}create_admin_reply(body){return this._httpClient.post(`${environments_environment__WEBPACK_IMPORTED_MODULE_1__.N.API_ENDPOINT+app_shared_constants_app_endpoints_constants__WEBPACK_IMPORTED_MODULE_0__.b.TICKETS.create_admin_reply}`,{...body}).pipe((0,rxjs__WEBPACK_IMPORTED_MODULE_2__.map)(response=>{if(200==response.code)return response.data[0]}))}create_admin_reply_and_close(body){return this._httpClient.post(`${environments_environment__WEBPACK_IMPORTED_MODULE_1__.N.API_ENDPOINT+app_shared_constants_app_endpoints_constants__WEBPACK_IMPORTED_MODULE_0__.b.TICKETS.create_reply_close}`,{...body}).pipe((0,rxjs__WEBPACK_IMPORTED_MODULE_2__.map)(response=>{if(200==response.code)return response.data[0]}))}upload_ticket_attachments(files){let imgData=new FormData;for(let i=0;i<files.length;i++){const file=files[i];imgData.append("image",file,file.name)}let params=(new _angular_common_http__WEBPACK_IMPORTED_MODULE_3__.LE).set("folder","ticket-attachments");return this._httpClient.post(`${environments_environment__WEBPACK_IMPORTED_MODULE_1__.N.API_ENDPOINT+app_shared_constants_app_endpoints_constants__WEBPACK_IMPORTED_MODULE_0__.b.upload_file.upload_file}/`,imgData,{params}).pipe((0,rxjs__WEBPACK_IMPORTED_MODULE_2__.map)(response=>{if(console.log("Uploading image response: ",response),response.success)return response.data}))}get_all_shortcuts(page=0,limit,searchKey){console.log("search",searchKey);let pageAfterUpdate=page+1;-1==page&&(pageAfterUpdate=-1);let url=environments_environment__WEBPACK_IMPORTED_MODULE_1__.N.API_ENDPOINT+app_shared_constants_app_endpoints_constants__WEBPACK_IMPORTED_MODULE_0__.b.shortCuts.all_shortCuts,params=(new _angular_common_http__WEBPACK_IMPORTED_MODULE_3__.LE).set("page",pageAfterUpdate);return limit&&(params=params.append("limit",limit)),searchKey&&(params=params.append("search",searchKey)),this._httpClient.get(`${url}`,{params}).pipe((0,rxjs__WEBPACK_IMPORTED_MODULE_2__.map)(response=>{if(response.success){const data=response.data;return this._All_shortCuts.next(data),this._pagination.next({length:response.page_info.count,pageIndex:page,pageSize:limit}),data}}))}get_all_shortcuts_without_pagination(){let url=environments_environment__WEBPACK_IMPORTED_MODULE_1__.N.API_ENDPOINT+app_shared_constants_app_endpoints_constants__WEBPACK_IMPORTED_MODULE_0__.b.shortCuts.all_shortCuts,params=(new _angular_common_http__WEBPACK_IMPORTED_MODULE_3__.LE).set("page",-1);return params=params.append("status","active"),this._httpClient.get(`${url}`,{params}).pipe((0,rxjs__WEBPACK_IMPORTED_MODULE_2__.map)(response=>{if(response.success){const data=response.data;return this._All_shortCuts.next(data),data}}))}create_shortcut(data){return this._httpClient.post(`${environments_environment__WEBPACK_IMPORTED_MODULE_1__.N.API_ENDPOINT+app_shared_constants_app_endpoints_constants__WEBPACK_IMPORTED_MODULE_0__.b.shortCuts.create_shortCuts}`,{...data}).pipe((0,rxjs__WEBPACK_IMPORTED_MODULE_2__.map)(response=>{if(200==response.code)return response.data}))}delete_shortcut(id){return this._httpClient.delete(`${environments_environment__WEBPACK_IMPORTED_MODULE_1__.N.API_ENDPOINT+app_shared_constants_app_endpoints_constants__WEBPACK_IMPORTED_MODULE_0__.b.shortCuts.delete_shortCuts}/${id}`)}update_shortcut(body,id){return this._httpClient.put(`${environments_environment__WEBPACK_IMPORTED_MODULE_1__.N.API_ENDPOINT+app_shared_constants_app_endpoints_constants__WEBPACK_IMPORTED_MODULE_0__.b.shortCuts.update_shortCuts}/${id}`,{...body})}static#_=this.\u0275fac=function(t){return new(t||ContactUsService2)(_angular_core__WEBPACK_IMPORTED_MODULE_4__.LFG(_angular_common_http__WEBPACK_IMPORTED_MODULE_3__.eN))};static#_2=this.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_4__.Yz7({token:ContactUsService2,factory:ContactUsService2.\u0275fac,providedIn:"root"})}return ContactUsService2})()},14658:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>ticket_container_routes});var router=__webpack_require__(16055),core=__webpack_require__(78371);let TicketContainerComponent=(()=>{class TicketContainerComponent2{static#_=this.\u0275fac=function(t){return new(t||TicketContainerComponent2)};static#_2=this.\u0275cmp=core.Xpm({type:TicketContainerComponent2,selectors:[["app-ticket-container"]],standalone:!0,features:[core.jDz],decls:2,vars:0,consts:[[1,"w-full","h-full","min-h-max","max-h-max"]],template:function(rf,ctx){1&rf&&(core.TgZ(0,"div",0),core._UZ(1,"router-outlet"),core.qZA())},dependencies:[router.lC],styles:["app-ticket-container[_ngcontent-%COMP%]{display:flex;height:-moz-fit-content;height:fit-content;max-height:100vh;min-height:100vh;flex-direction:column}"]})}return TicketContainerComponent2})();var contact_us_service=__webpack_require__(62779);const ticket_container_routes=[{path:"",component:TicketContainerComponent,children:[{path:"",loadChildren:()=>__webpack_require__.e(5137).then(__webpack_require__.bind(__webpack_require__,55137))},{path:"ticket",resolve:{tickets:()=>(0,core.f3M)(contact_us_service.D).getAllTickets("open ,pending"),shortcuts:()=>(0,core.f3M)(contact_us_service.D).get_all_shortcuts_without_pagination()},loadChildren:()=>__webpack_require__.e(7693).then(__webpack_require__.bind(__webpack_require__,47693))}]}]}};